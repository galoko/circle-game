{"version":3,"file":"main.js","sources":["../src/lcg.ts","../src/audio.ts","../src/canvas.ts","../src/utils.ts","../src/confetti.ts","../src/time.ts","../src/player.ts","../src/camera.ts","../src/teams.ts","../src/messages.ts","../src/renderer.ts","../src/game-state.ts","../src/physics.ts","../src/ai.ts","../src/game-loop.ts","../src/main.ts"],"sourcesContent":["// ---- Seeded RNG (LCG) ----\r\n// 32-bit LCG: x = (a*x + c) mod 2^32\r\n// Returns float in [0, 1)\r\nfunction makeLCG(seed: number) {\r\n    let state = seed >>> 0\r\n    return function random() {\r\n        state = (Math.imul(1664525, state) + 1013904223) >>> 0\r\n        return state / 4294967296\r\n    }\r\n}\r\n\r\n// Pick a seed (fixed for deterministic runs; or change it per run)\r\nconst rand = makeLCG(0xdeadbea) // <= change seed here if you want\r\n\r\n// Optional helpers\r\nexport const randRange = (min: number, max: number) => min + (max - min) * rand()\r\n","import { randRange } from \"./lcg\"\r\n\r\nconst MAX_HIT_SOUNDS = 1\r\nlet activeHitSounds = 0\r\n\r\nconst SOUNDS = {\r\n    SPAWN: [\r\n        \"545201__theplax__pop-1.wav\",\r\n        \"545200__theplax__pop-2.wav\",\r\n        \"545199__theplax__pop-3.wav\",\r\n        \"545198__theplax__pop-4.wav\",\r\n    ],\r\n    HIT: [\r\n        \"impactTin_medium_000.ogg\",\r\n        \"impactTin_medium_001.ogg\",\r\n        \"impactTin_medium_002.ogg\",\r\n        \"impactTin_medium_003.ogg\",\r\n        \"impactTin_medium_004.ogg\",\r\n    ],\r\n    DEATH: [\r\n        \"545201__theplax__pop-1.wav\",\r\n        \"545200__theplax__pop-2.wav\",\r\n        \"545199__theplax__pop-3.wav\",\r\n        \"545198__theplax__pop-4.wav\",\r\n    ],\r\n    WIN: [\"zapsplat_multimedia_game_sound_coin_collect_bonus_win_113262.mp3\"],\r\n    VOTE: [\"634690__adhdreaming__lil-pip.wav\"],\r\n    BACKGROUND: [\"Sketchbook 2024-12-21.ogg\"],\r\n    WINS_6: [\"6_wins.wav\"],\r\n    WINS_7: [\"7_wins.wav\"],\r\n}\r\n\r\ntype SoundOptions = {\r\n    loop?: boolean\r\n    volume?: number\r\n    noRandom?: boolean\r\n}\r\n\r\ntype SoundMap = Record<string, AudioBuffer[]>\r\n\r\n/* =======================\r\n   Internal module state\r\n   ======================= */\r\n\r\nlet context: AudioContext | null = null\r\nlet destination: MediaStreamAudioDestinationNode | null = null\r\nlet audioElement: HTMLAudioElement | null = null\r\nlet buffers: SoundMap = {}\r\n\r\n/* =======================\r\n   Helpers\r\n   ======================= */\r\n\r\nexport function waitForUserGesture(): Promise<void> {\r\n    return new Promise(resolve => {\r\n        const handler = () => {\r\n            window.removeEventListener(\"pointerdown\", handler)\r\n            window.removeEventListener(\"keydown\", handler)\r\n            resolve()\r\n        }\r\n\r\n        window.addEventListener(\"pointerdown\", handler, { once: true })\r\n        window.addEventListener(\"keydown\", handler, { once: true })\r\n    })\r\n}\r\n\r\n/* =======================\r\n   Public API\r\n   ======================= */\r\n\r\n/** Call ONCE at startup */\r\nexport async function initAudio() {\r\n    await waitForUserGesture()\r\n\r\n    context = new AudioContext()\r\n    destination = context.createMediaStreamDestination()\r\n\r\n    audioElement = new Audio()\r\n    audioElement.srcObject = destination.stream\r\n    audioElement.autoplay = true\r\n\r\n    await context.resume()\r\n    await preloadSounds(SOUNDS)\r\n}\r\n\r\nexport async function setOutputDevice(deviceId: string) {\r\n    if (!audioElement) {\r\n        throw new Error(\"Audio not initialized\")\r\n    }\r\n\r\n    if (!(\"setSinkId\" in audioElement)) {\r\n        throw new Error(\"setSinkId not supported\")\r\n    }\r\n\r\n    // @ts-ignore\r\n    await audioElement.setSinkId(deviceId)\r\n}\r\n\r\n/** Play random one-shot from group */\r\nexport function playOnceFromGroup(group: keyof typeof SOUNDS, options: SoundOptions = {}) {\r\n    const list = buffers[group]\r\n    if (!list?.length || !context || !destination) return\r\n\r\n    // ðŸš« limit HIT spam\r\n    if (group === \"HIT\" && activeHitSounds >= MAX_HIT_SOUNDS) return\r\n\r\n    const buffer = list[randRange(0, list.length - 1) | 0]\r\n    const source = playBuffer(buffer, false, options)\r\n\r\n    if (group === \"HIT\" && source) {\r\n        activeHitSounds++\r\n\r\n        source.onended = () => {\r\n            activeHitSounds--\r\n        }\r\n    }\r\n}\r\n\r\n/** Play looping sound (music) */\r\nexport function playLoop(group: keyof typeof SOUNDS, options: SoundOptions = {}) {\r\n    const buffer = buffers[group]?.[0]\r\n    if (!buffer || !context || !destination) return\r\n\r\n    playBuffer(buffer, true, options)\r\n}\r\n\r\n/* =======================\r\n   Internal functions\r\n   ======================= */\r\n\r\nasync function preloadSounds(sounds: Record<string, string[]>) {\r\n    if (!context) throw new Error(\"AudioContext not initialized\")\r\n\r\n    const entries = Object.entries(sounds)\r\n\r\n    await Promise.all(\r\n        entries.map(async ([key, urls]) => {\r\n            buffers[key] = await Promise.all(\r\n                urls.map(async url => {\r\n                    const res = await fetch(`build/sounds/${url}`)\r\n                    const data = await res.arrayBuffer()\r\n                    return context!.decodeAudioData(data)\r\n                })\r\n            )\r\n        })\r\n    )\r\n}\r\n\r\nfunction playBuffer(buffer: AudioBuffer, loop: boolean, options: SoundOptions) {\r\n    if (!context || !destination) return\r\n\r\n    const source = context.createBufferSource()\r\n    const gain = context.createGain()\r\n\r\n    source.buffer = buffer\r\n    source.loop = loop\r\n\r\n    // ðŸ”€ RANDOM PITCH (Â±5%)\r\n    source.playbackRate.value = options.noRandom ? 1 : randRange(0.85, 1.15)\r\n\r\n    // ðŸ”Š Slight volume randomization (optional)\r\n    gain.gain.value = (options.volume ?? 1.0) * (options.noRandom ? 1 : randRange(0.9, 1.05))\r\n\r\n    source.connect(gain)\r\n    gain.connect(destination)\r\n    source.start()\r\n\r\n    return source\r\n}\r\n\r\nexport async function getAudioOutputDevices() {\r\n    const devices = await navigator.mediaDevices.enumerateDevices()\r\n\r\n    return devices\r\n        .filter(d => d.kind === \"audiooutput\")\r\n        .map(d => ({\r\n            deviceId: d.deviceId,\r\n            label: d.label || \"Unknown output device\",\r\n        }))\r\n}\r\n\r\nexport async function setLineOutputDevice() {\r\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\r\n\r\n    const devices = await getAudioOutputDevices()\r\n    const device = devices.find(d => d.label === \"Line 1 (Virtual Audio Cable)\")\r\n    if (device) {\r\n        setOutputDevice(device.deviceId)\r\n    }\r\n\r\n    stream.getTracks().forEach(t => t.stop())\r\n}\r\n","export const canvas = document.createElement(\"canvas\")\r\n\r\nconst WIDTH = 1080\r\nconst HEIGHT = 1920\r\n\r\ncanvas.width = WIDTH\r\ncanvas.height = HEIGHT\r\ncanvas.style.width = WIDTH / devicePixelRatio + \"px\"\r\ncanvas.style.height = HEIGHT / devicePixelRatio + \"px\"\r\ncanvas.style.position = \"fixed\"\r\ncanvas.style.left = \"0\"\r\ncanvas.style.bottom = \"0\"\r\ndocument.body.appendChild(canvas)\r\n\r\nexport const ctx = canvas.getContext(\"2d\")!\r\n","export function easeOutQuad(t: number) {\r\n    return 1 - (1 - t) * (1 - t)\r\n}\r\n\r\nexport function easeOutCubic(t: number) {\r\n    return 1 - Math.pow(1 - t, 3)\r\n}\r\n\r\nexport function clamp(v: number, min: number, max: number) {\r\n    return v < min ? min : v > max ? max : v\r\n}\r\n\r\nexport function getQueryParam(name: string): string | null {\r\n    const params = new URLSearchParams(window.location.search)\r\n    return params.get(name)\r\n}\r\n","import { ctx } from \"./canvas\"\r\nimport { randRange } from \"./lcg\"\r\nimport { clamp } from \"./utils\"\r\n\r\ntype Confetti = {\r\n    x: number\r\n    y: number\r\n    vx: number\r\n    vy: number\r\n    size: number\r\n    rot: number\r\n    vr: number\r\n    color: string\r\n    life: number\r\n    ttl: number\r\n    exploded: boolean\r\n}\r\n\r\nconst confetti: Confetti[] = []\r\n\r\nexport function spawnConfettiFirework() {\r\n    const COLORS = [\"#ff3b3b\", \"#ffcc00\", \"#2aff4e\", \"#2a7fff\", \"#b266ff\", \"#ff66cc\", \"#ffffff\"]\r\n\r\n    // launch rocket\r\n    confetti.push({\r\n        x: randRange(ctx.canvas.width * 0.2, ctx.canvas.width * 0.8),\r\n        y: ctx.canvas.height + 20,\r\n        vx: randRange(-60, 60),\r\n        vy: randRange(-1200 * 2, -900 * 2),\r\n        size: 12,\r\n        rot: 0,\r\n        vr: 0,\r\n        color: COLORS[(randRange(0, 1) * COLORS.length) | 0],\r\n        life: 0,\r\n        ttl: randRange(0.8, 1.1),\r\n        exploded: false,\r\n    })\r\n}\r\n\r\nexport function stepConfetti(dt: number) {\r\n    // optional: drip-confetti while the win screen is up\r\n    if (randRange(0, 1) < dt * 0.6) spawnConfettiFirework()\r\n\r\n    const GRAVITY = 1600\r\n    const DRAG = 0.985\r\n\r\n    for (let i = confetti.length - 1; i >= 0; i--) {\r\n        const p = confetti[i]\r\n        p.life += dt\r\n\r\n        // ðŸš€ rocket phase\r\n        if (!p.exploded) {\r\n            p.vy += GRAVITY * dt * 0.15\r\n            p.x += p.vx * dt\r\n            p.y += p.vy * dt\r\n\r\n            if (p.life >= p.ttl) {\r\n                // ðŸ’¥ EXPLODE\r\n                const COUNT = Math.round(randRange(240, 400)) | 0\r\n\r\n                for (let k = 0; k < COUNT; k++) {\r\n                    const angle = (k / COUNT) * Math.PI * 2 + randRange(-0.2, 0.2)\r\n                    const speed = randRange(300, 900)\r\n\r\n                    confetti.push({\r\n                        x: p.x,\r\n                        y: p.y,\r\n                        vx: Math.cos(angle) * speed,\r\n                        vy: Math.sin(angle) * speed,\r\n                        size: randRange(6, 14) * 2,\r\n                        rot: randRange(0, Math.PI * 2),\r\n                        vr: randRange(-12, 12),\r\n                        color: [\r\n                            \"#ff3b3b\",\r\n                            \"#ffcc00\",\r\n                            \"#2aff4e\",\r\n                            \"#2a7fff\",\r\n                            \"#b266ff\",\r\n                            \"#ff66cc\",\r\n                            \"#ffffff\",\r\n                        ][(randRange(0, 1) * 7) | 0],\r\n                        life: 0,\r\n                        ttl: randRange(1.8, 3.2),\r\n                        exploded: true,\r\n                    })\r\n                }\r\n\r\n                confetti.splice(i, 1)\r\n                continue\r\n            }\r\n        } else {\r\n            // ðŸŽ‰ falling confetti\r\n            p.vy += GRAVITY * dt\r\n            p.vx *= DRAG\r\n            p.vy *= DRAG\r\n\r\n            p.x += p.vx * dt\r\n            p.y += p.vy * dt\r\n            p.rot += p.vr * dt\r\n\r\n            if (p.life > p.ttl || p.y > ctx.canvas.height + 200) {\r\n                confetti.splice(i, 1)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function drawConfetti() {\r\n    for (const p of confetti) {\r\n        const fade = 1 - clamp((p.life - (p.ttl - 0.7)) / 0.7, 0, 1)\r\n\r\n        ctx.save()\r\n        ctx.globalAlpha = fade\r\n        ctx.translate(p.x, p.y)\r\n        ctx.rotate(p.rot)\r\n        ctx.fillStyle = p.color\r\n\r\n        // rectangles + strips look more festive\r\n        ctx.fillRect(-p.size * 0.5, -p.size * 0.15, p.size, p.size * 0.3)\r\n\r\n        ctx.restore()\r\n    }\r\n}\r\n","import { getQueryParam } from \"./utils\"\r\n\r\nlet currentTime = 0\r\nlet timescale = parseInt(getQueryParam(\"t\") ?? \"1\")\r\n\r\nexport function getCurrentTime() {\r\n    return currentTime\r\n}\r\n\r\nexport function advanceTime(dt: number) {\r\n    currentTime += dt\r\n}\r\n\r\nexport function getTimescale() {\r\n    return timescale\r\n}\r\n","import { getCurrentTime } from \"./time\"\r\n\r\nlet NextPlayerID = 1\r\n\r\nexport class Player {\r\n    id = NextPlayerID++\r\n\r\n    HP: number = 1000\r\n\r\n    constructor(readonly team: number, public x: number, public y: number, public size = 1) {\r\n        //\r\n    }\r\n\r\n    vx = 0\r\n    vy = 0\r\n\r\n    targetedBy = 0\r\n\r\n    target?: Player\r\n    retargetTimer = 0\r\n\r\n    attackCooldown = 0\r\n\r\n    attackSpeed = 1\r\n    attack = 25\r\n\r\n    // for animation\r\n    attackedTime = 0\r\n    hitDirX = 0\r\n    hitDirY = 0\r\n\r\n    spawnTime = getCurrentTime()\r\n    deathTime?: number\r\n\r\n    dust?: {\r\n        angle: number\r\n        speed: number\r\n        size: number\r\n        offsetX: number\r\n        offsetY: number\r\n    }[]\r\n}\r\n","import { ctx } from \"./canvas\"\r\nimport { getPlayers } from \"./game-state\"\r\n\r\nlet cameraScale = 25 // 1 meter = 100 pixels\r\nlet cameraRotation = 0 // current rotation (radians)\r\nlet boundsCenterX = 0\r\nlet boundsCenterY = 0\r\n\r\nexport function getCamera() {\r\n    return {\r\n        cameraScale,\r\n        cameraRotation,\r\n        boundsCenterX,\r\n        boundsCenterY,\r\n    }\r\n}\r\n\r\nlet minX = Infinity\r\nlet minY = Infinity\r\nlet maxX = -Infinity\r\nlet maxY = -Infinity\r\n\r\nexport function updateEncompassingViewport() {\r\n    minX = Infinity\r\n    minY = Infinity\r\n    maxX = -Infinity\r\n    maxY = -Infinity\r\n\r\n    const players = getPlayers()\r\n    for (const player of players) {\r\n        minX = Math.min(minX, player.x - player.size / 2)\r\n        minY = Math.min(minY, player.y - player.size / 2)\r\n        maxX = Math.max(maxX, player.x + player.size / 2)\r\n        maxY = Math.max(maxY, player.y + player.size / 2)\r\n    }\r\n\r\n    if (!isFinite(minX) || !isFinite(minY) || !isFinite(maxX) || !isFinite(maxY)) {\r\n        minX = 0\r\n        minY = 0\r\n        maxX = 0\r\n        maxY = 0\r\n    }\r\n\r\n    // center of current world AABB (computed earlier in your render loop)\r\n    boundsCenterX = (minX + maxX) / 2\r\n    boundsCenterY = (minY + maxY) / 2\r\n\r\n    const boundsWidth = Math.max(1e-6, maxX - minX)\r\n    const boundsHeight = Math.max(1e-6, maxY - minY)\r\n    cameraScale = Math.min(ctx.canvas.width / boundsWidth, ctx.canvas.height / boundsHeight)\r\n}\r\n\r\nexport function getEncompassingViewport() {\r\n    return { minX, minY, maxX, maxY }\r\n}\r\n","export const TEAM_A = 1\r\nexport const TEAM_B = 2\r\n","import { randRange } from \"./lcg\"\r\nimport { Player } from \"./player\"\r\nimport { getPlayers } from \"./game-state\"\r\nimport { startVoteA_Anim, startVoteB_Anim } from \"./renderer\"\r\nimport { TEAM_A, TEAM_B } from \"./teams\"\r\nimport { getCurrentTime } from \"./time\"\r\nimport { getEncompassingViewport } from \"./camera\"\r\nimport { playOnceFromGroup } from \"./audio\"\r\nimport { getQueryParam } from \"./utils\"\r\n\r\nexport const SPAWN_TEAM_A = 1\r\nexport const SPAWN_TEAM_B = 2\r\n\r\nconst messages: number[] = []\r\n\r\nlet lastMessageTime = 0\r\nlet spawnVoteA = 0\r\nlet spawnVoteA_Needed = 1\r\nlet spawnVoteB = 0\r\nlet spawnVoteB_Needed = 1\r\n\r\nexport function updateSpawnVoteA_Needed() {\r\n    const players = getPlayers()\r\n\r\n    const aliveCountA = players.filter(p => p.HP > 0 && p.team === TEAM_A).length\r\n    spawnVoteA_Needed = Math.max(1, Math.ceil(aliveCountA / 20))\r\n}\r\n\r\nexport function updateSpawnVoteB_Needed() {\r\n    const players = getPlayers()\r\n\r\n    const aliveCountB = players.filter(p => p.HP > 0 && p.team === TEAM_B).length\r\n    spawnVoteB_Needed = Math.max(1, Math.ceil(aliveCountB / 20))\r\n}\r\n\r\nexport function getVotingInfo() {\r\n    return {\r\n        spawnVoteA,\r\n        spawnVoteA_Needed,\r\n        spawnVoteB,\r\n        spawnVoteB_Needed,\r\n    }\r\n}\r\n\r\nexport function addMessage(msg: number) {\r\n    messages.push(msg)\r\n}\r\n\r\nconst userActivity = 1\r\n\r\nfunction simulateUserActivity() {\r\n    if (getCurrentTime() - lastMessageTime > userActivity) {\r\n        lastMessageTime = getCurrentTime()\r\n\r\n        // spawn new players\r\n        if (randRange(0, 1) < 0.5) {\r\n            messages.push(SPAWN_TEAM_A)\r\n        } else {\r\n            messages.push(SPAWN_TEAM_B)\r\n        }\r\n    }\r\n}\r\n\r\nconst shouldSimulate = getQueryParam(\"sim\") !== null\r\n\r\nexport function stepMessages() {\r\n    if (shouldSimulate) {\r\n        simulateUserActivity()\r\n    }\r\n\r\n    updateSpawnVoteA_Needed()\r\n    updateSpawnVoteB_Needed()\r\n\r\n    const players = getPlayers()\r\n    let { minX, minY, maxX, maxY } = getEncompassingViewport()\r\n\r\n    let parsed = false\r\n    while (messages.length > 0) {\r\n        const msg = messages.shift()\r\n        switch (msg) {\r\n            case SPAWN_TEAM_A: {\r\n                spawnVoteA++\r\n                startVoteA_Anim()\r\n\r\n                if (spawnVoteA >= spawnVoteA_Needed) {\r\n                    spawnVoteA = 0\r\n\r\n                    players.push(new Player(TEAM_A, randRange(minX, maxX), randRange(minY, maxY)))\r\n\r\n                    playOnceFromGroup(\"SPAWN\")\r\n                }\r\n\r\n                parsed = true\r\n                break\r\n            }\r\n            case SPAWN_TEAM_B: {\r\n                spawnVoteB++\r\n                startVoteB_Anim()\r\n\r\n                if (spawnVoteB >= spawnVoteB_Needed) {\r\n                    spawnVoteB = 0\r\n\r\n                    updateSpawnVoteB_Needed()\r\n\r\n                    players.push(new Player(TEAM_B, randRange(minX, maxX), randRange(minY, maxY)))\r\n                    playOnceFromGroup(\"SPAWN\")\r\n                }\r\n\r\n                parsed = true\r\n                break\r\n            }\r\n        }\r\n    }\r\n\r\n    if (parsed) {\r\n        // playOnceFromGroup(\"VOTE\", { volume: 0.1 })\r\n    }\r\n}\r\n\r\nconst WS_URL = \"ws://localhost:8585/sink\"\r\n\r\nlet ws: WebSocket | null = null\r\nlet reconnectTimer: number | null = null\r\n\r\nconst RECONNECT_DELAY_MS = 1000\r\n\r\nfunction connect() {\r\n    if (ws && ws.readyState === WebSocket.OPEN) return\r\n\r\n    ws = new WebSocket(WS_URL)\r\n\r\n    ws.onopen = () => {\r\n        console.log(\"WS connected\")\r\n\r\n        if (reconnectTimer !== null) {\r\n            clearTimeout(reconnectTimer)\r\n            reconnectTimer = null\r\n        }\r\n    }\r\n\r\n    ws.onmessage = event => {\r\n        console.log(\"WS message:\", event.data)\r\n        const data = JSON.parse(event.data)\r\n        if (data.message) {\r\n            let count6 = 0\r\n            let count7 = 0\r\n\r\n            for (const c of data.message) {\r\n                if (c === \"6\") count6++\r\n                else if (c === \"7\") count7++\r\n            }\r\n\r\n            const total = count6 + count7\r\n            if (total === 0) {\r\n                return\r\n            }\r\n\r\n            const r = randRange(0, 1) * total\r\n\r\n            if (r < count6) {\r\n                messages.push(SPAWN_TEAM_A)\r\n            } else {\r\n                messages.push(SPAWN_TEAM_B)\r\n            }\r\n        }\r\n    }\r\n\r\n    ws.onerror = err => {\r\n        console.error(\"WS error\", err)\r\n        ws?.close()\r\n    }\r\n\r\n    ws.onclose = () => {\r\n        console.log(\"WS closed, reconnecting...\")\r\n        scheduleReconnect()\r\n    }\r\n}\r\n\r\n/**\r\n * Schedule reconnect\r\n */\r\nfunction scheduleReconnect() {\r\n    if (reconnectTimer !== null) return\r\n\r\n    reconnectTimer = window.setTimeout(() => {\r\n        reconnectTimer = null\r\n        connect()\r\n    }, RECONNECT_DELAY_MS)\r\n}\r\n\r\nconnect()\r\n","import { getCamera } from \"./camera\"\r\nimport { ctx } from \"./canvas\"\r\nimport { drawConfetti } from \"./confetti\"\r\nimport { getPlayers, getTeamWon } from \"./game-state\"\r\nimport { getVotingInfo } from \"./messages\"\r\nimport { TEAM_A } from \"./teams\"\r\nimport { getCurrentTime } from \"./time\"\r\nimport { clamp, easeOutCubic, easeOutQuad } from \"./utils\"\r\n\r\n// animations\r\n\r\nconst VOTE_PUMP_DURATION = 0.25\r\nexport const DEATH_DURATION = 2\r\nconst SPAWN_DURATION = 0.35\r\nconst SPAWN_FADE_IN = 0.2\r\nconst HIT_ANIMATION = 0.25 // seconds\r\n\r\nlet voteAnimA = 0\r\nlet voteAnimB = 0\r\n\r\nexport function startVoteA_Anim() {\r\n    voteAnimA = getCurrentTime() + VOTE_PUMP_DURATION\r\n}\r\n\r\nexport function startVoteB_Anim() {\r\n    voteAnimB = getCurrentTime() + VOTE_PUMP_DURATION\r\n}\r\n\r\n// render functions\r\n\r\nfunction drawVoteBar(\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number,\r\n    votes: number,\r\n    votesNeeded: number,\r\n    color: string,\r\n    label: string,\r\n    pumpT: number\r\n) {\r\n    const t = Math.max(0, Math.min(1, pumpT / VOTE_PUMP_DURATION))\r\n    const scale = 1 + Math.sin(t * Math.PI) * 0.15\r\n\r\n    ctx.save()\r\n    ctx.translate(x + width / 2, y + height / 2)\r\n    ctx.scale(scale, scale)\r\n    ctx.translate(-width / 2, -height / 2)\r\n\r\n    // outline\r\n    ctx.lineWidth = 3\r\n    ctx.strokeStyle = color\r\n    ctx.strokeRect(0, 0, width, height)\r\n\r\n    // fill\r\n    const fillW = (votes / votesNeeded) * width\r\n    ctx.fillStyle = color\r\n    ctx.globalAlpha = 0.6\r\n    ctx.fillRect(0, 0, fillW, height)\r\n\r\n    ctx.globalAlpha = 1\r\n\r\n    // text\r\n    ctx.fillStyle = \"white\"\r\n    ctx.font = 'bold 40px \"VT323\"'\r\n    ctx.textAlign = \"center\"\r\n    ctx.textBaseline = \"middle\"\r\n    ctx.fillText(`${label} (${votes}/${votesNeeded})`, width / 2, height / 2)\r\n\r\n    ctx.restore()\r\n}\r\n\r\n// win screen\r\n\r\nlet winStartTime = 0\r\n\r\nexport function setupWinScreen() {\r\n    winStartTime = getCurrentTime()\r\n}\r\n\r\nfunction winnerLabel() {\r\n    return getTeamWon() === TEAM_A ? \"6\" : \"7\"\r\n}\r\n\r\nfunction drawWinScreen() {\r\n    // overlay fade timing\r\n    const t = clamp((getCurrentTime() - winStartTime) / 1.8, 0, 1)\r\n    const a = easeOutQuad(t)\r\n\r\n    // screen-space overlay\r\n    ctx.resetTransform()\r\n    ctx.save()\r\n\r\n    // darken + tint\r\n    ctx.globalAlpha = 0.55 * a\r\n    ctx.fillStyle = \"black\"\r\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n\r\n    ctx.restore()\r\n\r\n    // centered text\r\n    ctx.save()\r\n    ctx.textAlign = \"center\"\r\n    ctx.textBaseline = \"middle\"\r\n    ctx.fillStyle = \"white\"\r\n\r\n    const msg = `Game over! ${winnerLabel()} wins!`\r\n    ctx.globalAlpha = clamp((t - 0.15) / 0.85, 0, 1)\r\n\r\n    ctx.font = 'bold 100px \"VT323\"'\r\n    ctx.fillText(msg, ctx.canvas.width / 2, ctx.canvas.height / 2)\r\n    ctx.strokeStyle = \"black\"\r\n\r\n    ctx.restore()\r\n\r\n    // confetti on top\r\n    drawConfetti()\r\n}\r\n\r\nexport function renderScene() {\r\n    // rendering\r\n    ctx.resetTransform()\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    ctx.fillStyle = \"#151515\"\r\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n\r\n    // draw vote labels\r\n\r\n    const { cameraScale, cameraRotation, boundsCenterX, boundsCenterY } = getCamera()\r\n\r\n    ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2)\r\n    ctx.scale(cameraScale, cameraScale)\r\n    ctx.rotate(cameraRotation)\r\n    ctx.translate(-boundsCenterX, -boundsCenterY)\r\n\r\n    const players = getPlayers()\r\n\r\n    for (const player of players) {\r\n        const hitT = getCurrentTime() - player.attackedTime\r\n        if (hitT > 0 && hitT < HIT_ANIMATION) {\r\n            const t = hitT / HIT_ANIMATION\r\n            const alpha = (1 - t) * 0.7\r\n\r\n            const nx = player.hitDirX\r\n            const ny = player.hitDirY\r\n\r\n            // perpendicular vector\r\n            const px = -ny\r\n            const py = nx\r\n\r\n            const length = player.size * (1.2 + t * 0.6)\r\n            const width = player.size * 0.4\r\n\r\n            const cx = player.x\r\n            const cy = player.y\r\n\r\n            const x0 = cx - nx * length\r\n            const y0 = cy - ny * length\r\n            const x1 = cx\r\n            const y1 = cy\r\n\r\n            const grad = ctx.createLinearGradient(x0, y0, x1, y1)\r\n            grad.addColorStop(0, `rgba(255, 0, 0, 0)`)\r\n            grad.addColorStop(0.5, `rgba(255, 0, 0, ${alpha})`)\r\n            grad.addColorStop(1, `rgba(255, 0, 0, 0)`)\r\n\r\n            ctx.fillStyle = grad\r\n            ctx.beginPath()\r\n\r\n            ctx.moveTo(cx + px * width, cy + py * width)\r\n            ctx.lineTo(cx - px * width, cy - py * width)\r\n            ctx.lineTo(cx - nx * length - px * width, cy - ny * length - py * width)\r\n            ctx.lineTo(cx - nx * length + px * width, cy - ny * length + py * width)\r\n\r\n            ctx.closePath()\r\n            ctx.fill()\r\n        }\r\n\r\n        const spawnT = getCurrentTime() - player.spawnTime\r\n\r\n        if (spawnT >= 0 && spawnT < SPAWN_DURATION) {\r\n            const t = spawnT / SPAWN_DURATION\r\n\r\n            // --- unit alpha ---\r\n            const alpha = clamp(t / SPAWN_FADE_IN, 0, 1)\r\n\r\n            // --- glow ---\r\n            const glowT = clamp(spawnT / 0.25, 0, 1)\r\n            const glowAlpha = Math.sin(glowT * Math.PI) * 0.6\r\n\r\n            const baseRadius = player.size * 0.6\r\n            const glowRadius = baseRadius * (1.0 + 1.5 * (1 - t))\r\n\r\n            ctx.save()\r\n            ctx.globalAlpha = glowAlpha\r\n            ctx.fillStyle = \"purple\"\r\n\r\n            ctx.beginPath()\r\n            ctx.arc(player.x, player.y, glowRadius, 0, Math.PI * 2)\r\n            ctx.fill()\r\n            ctx.restore()\r\n\r\n            ctx.globalAlpha = alpha\r\n        }\r\n\r\n        if (player.HP <= 0) {\r\n            if (player.deathTime !== undefined && player.dust) {\r\n                const t = clamp((getCurrentTime() - player.deathTime) / DEATH_DURATION, 0, 1)\r\n\r\n                const fade = 1 - easeOutCubic(t)\r\n                ctx.globalAlpha = fade\r\n\r\n                for (const d of player.dust) {\r\n                    // movement continues outward from edge\r\n                    const drift = t * d.speed\r\n\r\n                    const dx = d.offsetX + Math.cos(d.angle) * drift\r\n                    const dy = d.offsetY + Math.sin(d.angle) * drift - t * 0.4\r\n\r\n                    ctx.fillStyle = player.team === TEAM_A ? \"red\" : \"blue\"\r\n\r\n                    ctx.beginPath()\r\n                    ctx.arc(player.x + dx, player.y + dy, d.size * (1 - t), 0, Math.PI * 2)\r\n                    ctx.fill()\r\n                }\r\n\r\n                ctx.textAlign = \"center\"\r\n                ctx.textBaseline = \"middle\"\r\n                ctx.fillStyle = \"white\"\r\n                ctx.font = 'bold 0.8px \"VT323\"'\r\n                ctx.translate(player.x, player.y)\r\n                ctx.rotate(-cameraRotation)\r\n                ctx.globalAlpha = fade * fade\r\n                ctx.fillText(player.team === TEAM_A ? \"6\" : \"7\", 0, 0)\r\n                ctx.rotate(cameraRotation)\r\n                ctx.translate(-player.x, -player.y)\r\n\r\n                ctx.globalAlpha = 1\r\n            }\r\n        } else {\r\n            ctx.lineWidth = 0.02 + player.HP / 10000\r\n            ctx.beginPath()\r\n            ctx.arc(player.x, player.y, player.size / 2 - ctx.lineWidth / 2, 0, Math.PI * 2)\r\n            ctx.strokeStyle = player.team === TEAM_A ? \"red\" : \"blue\"\r\n            ctx.stroke()\r\n\r\n            ctx.textAlign = \"center\"\r\n            ctx.textBaseline = \"middle\"\r\n            ctx.fillStyle = \"white\"\r\n            ctx.font = 'bold 0.8px \"VT323\"'\r\n            ctx.translate(player.x, player.y)\r\n            ctx.rotate(-cameraRotation)\r\n            ctx.fillText(player.team === TEAM_A ? \"6\" : \"7\", 0, 0)\r\n            ctx.rotate(cameraRotation)\r\n            ctx.translate(-player.x, -player.y)\r\n        }\r\n\r\n        ctx.globalAlpha = 1\r\n    }\r\n\r\n    // ===== adjust camera =====\r\n\r\n    const teamWon = getTeamWon()\r\n    if (!teamWon) {\r\n        ctx.resetTransform()\r\n\r\n        const { spawnVoteA, spawnVoteA_Needed, spawnVoteB, spawnVoteB_Needed } = getVotingInfo()\r\n\r\n        const BAR_WIDTH = ctx.canvas.width * 0.8\r\n        const BAR_HEIGHT = 50\r\n        const BAR_X = (ctx.canvas.width - BAR_WIDTH) / 2\r\n\r\n        voteAnimA = Math.max(0, voteAnimA - getCurrentTime())\r\n        voteAnimB = Math.max(0, voteAnimB - getCurrentTime())\r\n\r\n        drawVoteBar(\r\n            BAR_X,\r\n            40,\r\n            BAR_WIDTH,\r\n            BAR_HEIGHT,\r\n            spawnVoteA,\r\n            spawnVoteA_Needed,\r\n            \"red\",\r\n            \"Send 6 to Spawn 6\",\r\n            voteAnimA\r\n        )\r\n\r\n        drawVoteBar(\r\n            BAR_X,\r\n            110,\r\n            BAR_WIDTH,\r\n            BAR_HEIGHT,\r\n            spawnVoteB,\r\n            spawnVoteB_Needed,\r\n            \"blue\",\r\n            \"Send 7 to Spawn 7\",\r\n            voteAnimB\r\n        )\r\n    } else {\r\n        drawWinScreen()\r\n    }\r\n}\r\n","import { playOnceFromGroup } from \"./audio\"\r\nimport { spawnConfettiFirework } from \"./confetti\"\r\nimport { randRange } from \"./lcg\"\r\nimport { Player } from \"./player\"\r\nimport { DEATH_DURATION, setupWinScreen } from \"./renderer\"\r\nimport { TEAM_A, TEAM_B } from \"./teams\"\r\nimport { getCurrentTime } from \"./time\"\r\n\r\nconst players: Player[] = []\r\nlet teamWon = 0\r\nlet winStartTime = 0\r\n\r\nexport function getPlayers() {\r\n    return players\r\n}\r\n\r\nexport function addPlayer(player: Player) {\r\n    players.push(player)\r\n}\r\n\r\nexport function getTeamWon() {\r\n    return teamWon\r\n}\r\n\r\nexport function generatePlayerGrid() {\r\n    for (let x = 0; x < 4; x++) {\r\n        for (let y = 0; y < 4; y++) {\r\n            addPlayer(\r\n                new Player(TEAM_A, 10 + x + randRange(-0.1, 0.1), 10 + y + randRange(-0.1, 0.1))\r\n            )\r\n            addPlayer(\r\n                new Player(\r\n                    TEAM_B,\r\n                    10 + x + randRange(-0.1, 0.1),\r\n                    10 + y + randRange(-0.1, 0.1) + 30\r\n                )\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport function stepGameLogic() {\r\n    const players = getPlayers()\r\n\r\n    let teamAplayers = 0\r\n    let teamBplayers = 0\r\n\r\n    for (let i = 0; i < players.length; i++) {\r\n        const p = players[i]\r\n        if (p.HP <= 0) {\r\n            if (p.target) {\r\n                p.target.targetedBy--\r\n                p.target = undefined\r\n            }\r\n\r\n            // died\r\n            if (p.deathTime === undefined) {\r\n                p.deathTime = getCurrentTime()\r\n                playOnceFromGroup(\"DEATH\")\r\n\r\n                // spawn dust\r\n\r\n                const COUNT = 32\r\n                p.dust = []\r\n\r\n                for (let i = 0; i < COUNT; i++) {\r\n                    const angle = (i / COUNT) * Math.PI * 2 + randRange(-0.15, 0.15)\r\n\r\n                    p.dust.push({\r\n                        angle,\r\n                        speed: randRange(0.6, 1.4),\r\n                        size: randRange(0.06, 0.14),\r\n\r\n                        // initial position ON THE EDGE\r\n                        offsetX: (Math.cos(angle) * p.size) / 2,\r\n                        offsetY: (Math.sin(angle) * p.size) / 2,\r\n                    })\r\n                }\r\n            } else if (p.deathTime + DEATH_DURATION < getCurrentTime()) {\r\n                players.splice(i, 1)\r\n                i--\r\n                continue\r\n            }\r\n        } else {\r\n            if (p.team === TEAM_A) {\r\n                teamAplayers++\r\n            } else {\r\n                teamBplayers++\r\n            }\r\n        }\r\n    }\r\n\r\n    if (teamWon == 0 && (teamAplayers == 0 || teamBplayers == 0)) {\r\n        if (teamAplayers === 0) {\r\n            teamWon = TEAM_B\r\n            playOnceFromGroup(\"WINS_7\", { noRandom: true })\r\n        } else if (teamBplayers == 0) {\r\n            teamWon = TEAM_A\r\n            playOnceFromGroup(\"WINS_6\", { noRandom: true })\r\n        }\r\n        winStartTime = getCurrentTime()\r\n        playOnceFromGroup(\"WIN\", { noRandom: true })\r\n        setupWinScreen()\r\n        spawnConfettiFirework() // initial burst\r\n    }\r\n\r\n    if (teamWon !== 0 && winStartTime + 30 < getCurrentTime()) {\r\n        teamWon = 0\r\n        players.length = 0\r\n        generatePlayerGrid()\r\n    }\r\n}\r\n","import { Player } from \"./player\"\r\nimport { getPlayers } from \"./game-state\"\r\nimport { getCamera } from \"./camera\"\r\n\r\nconst COLLISION_STIFFNESS = 100 // how hard circles push apart\r\nconst COLLISION_DAMPING = 40 // velocity damping on collision\r\nconst GLOBAL_DAMPING = 0.98 // air resistance\r\n\r\nexport function applyImpulseToCenter(player: Player, fx: number, fy: number, dt: number) {\r\n    player.vx += fx * dt\r\n    player.vy += fy * dt\r\n}\r\n\r\nconst ARENA_RADIUS = 12 // N (your max distance)\r\nconst ARENA_SOFTNESS = 3 // how early the pull starts\r\nconst ARENA_FORCE = 15\r\n\r\nfunction applyArenaConstraint(p: Player, dt: number) {\r\n    const { boundsCenterX, boundsCenterY } = getCamera()\r\n\r\n    const dx = p.x - boundsCenterX\r\n    const dy = p.y - boundsCenterY\r\n    const dist = Math.hypot(dx, dy)\r\n\r\n    const softRadius = ARENA_RADIUS - ARENA_SOFTNESS\r\n\r\n    if (dist <= softRadius) return\r\n\r\n    // smooth 0..1 when entering forbidden zone\r\n    const t = (dist - softRadius) / ARENA_SOFTNESS\r\n    const strength = t * t // quadratic = very smooth\r\n\r\n    const nx = dx / dist\r\n    const ny = dy / dist\r\n\r\n    p.vx -= nx * ARENA_FORCE * strength * dt\r\n    p.vy -= ny * ARENA_FORCE * strength * dt\r\n}\r\n\r\nexport function stepPhysics(dt: number) {\r\n    const players = getPlayers()\r\n\r\n    // --- Integrate velocity ---\r\n    for (const p of players) {\r\n        applyArenaConstraint(p, dt)\r\n\r\n        p.x += p.vx * dt\r\n        p.y += p.vy * dt\r\n\r\n        // global damping\r\n        p.vx *= GLOBAL_DAMPING\r\n        p.vy *= GLOBAL_DAMPING\r\n    }\r\n\r\n    // --- Circle-circle collisions ---\r\n    for (let i = 0; i < players.length; i++) {\r\n        const a = players[i]\r\n\r\n        for (let j = i + 1; j < players.length; j++) {\r\n            const b = players[j]\r\n\r\n            const dx = b.x - a.x\r\n            const dy = b.y - a.y\r\n            const dist2 = dx * dx + dy * dy\r\n\r\n            const ra = a.size * 0.5\r\n            const rb = b.size * 0.5\r\n            const minDist = ra + rb\r\n\r\n            if (dist2 === 0 || dist2 >= minDist * minDist) continue\r\n\r\n            const dist = Math.sqrt(dist2)\r\n            const nx = dx / dist\r\n            const ny = dy / dist\r\n\r\n            const penetration = minDist - dist\r\n\r\n            // --- Relative velocity ---\r\n            const rvx = b.vx - a.vx\r\n            const rvy = b.vy - a.vy\r\n            const relVel = rvx * nx + rvy * ny\r\n\r\n            // --- Spring impulse ---\r\n            const force = COLLISION_STIFFNESS * penetration - COLLISION_DAMPING * relVel\r\n\r\n            const impulseX = force * nx * dt\r\n            const impulseY = force * ny * dt\r\n\r\n            a.vx -= impulseX\r\n            a.vy -= impulseY\r\n            b.vx += impulseX\r\n            b.vy += impulseY\r\n        }\r\n    }\r\n}\r\n","import { randRange } from \"./lcg\"\r\nimport { applyImpulseToCenter } from \"./physics\"\r\nimport { Player } from \"./player\"\r\nimport { getPlayers } from \"./game-state\"\r\nimport { getCurrentTime } from \"./time\"\r\nimport { playOnceFromGroup } from \"./audio\"\r\n\r\nfunction findBestEnemy(player: Player): Player | undefined {\r\n    const players = getPlayers()\r\n\r\n    let best: Player | undefined\r\n    let bestScore = Infinity\r\n\r\n    // tunables\r\n    const DIST_WEIGHT = 10.0\r\n    const TARGET_WEIGHT = 2.0 // â†‘ increase to reduce focus fire\r\n\r\n    // precompute max distance (cheap & stable)\r\n    let maxDist = 0\r\n    for (const other of players) {\r\n        if (other.team === player.team || other.HP <= 0) continue\r\n        const dx = other.x - player.x\r\n        const dy = other.y - player.y\r\n        maxDist = Math.max(maxDist, Math.hypot(dx, dy))\r\n    }\r\n    maxDist ||= 1\r\n\r\n    for (const other of players) {\r\n        if (other.team === player.team || other.HP <= 0) continue\r\n\r\n        const dx = other.x - player.x\r\n        const dy = other.y - player.y\r\n        const dist = Math.hypot(dx, dy)\r\n\r\n        const normDist = dist / maxDist\r\n        const normTargeted = other.targetedBy\r\n\r\n        const score = DIST_WEIGHT * normDist + TARGET_WEIGHT * normTargeted\r\n\r\n        if (score < bestScore) {\r\n            bestScore = score\r\n            best = other\r\n        }\r\n    }\r\n\r\n    return best\r\n}\r\n\r\nconst MAX_SPEED = 1\r\nconst KP = 10 // attraction strength\r\nconst KD = 4 // damping (important!)\r\n\r\nconst ATTACK_DISTANCE = 0.1\r\n\r\nfunction applyMovementAI(player: Player, dt: number) {\r\n    // arrival slowing\r\n    const speedFactor = 1\r\n\r\n    let desiredVx: number\r\n    let desiredVy: number\r\n\r\n    if (player.target) {\r\n        const dx = player.target.x - player.x\r\n        const dy = player.target.y - player.y\r\n        const dist = Math.sqrt(dx * dx + dy * dy)\r\n\r\n        const targetDistance = player.size / 2 + player.target.size / 2 + ATTACK_DISTANCE / 2\r\n\r\n        if (dist < targetDistance) return\r\n\r\n        const nx = dx / dist\r\n        const ny = dy / dist\r\n\r\n        desiredVx = nx * MAX_SPEED * speedFactor\r\n        desiredVy = ny * MAX_SPEED * speedFactor\r\n    } else {\r\n        desiredVx = 0 * speedFactor\r\n        desiredVy = 0 * speedFactor\r\n    }\r\n\r\n    const errVx = desiredVx - player.vx\r\n    const errVy = desiredVy - player.vy\r\n\r\n    applyImpulseToCenter(player, KP * errVx - KD * player.vx, KP * errVy - KD * player.vy, dt)\r\n}\r\n\r\nexport function stepAI(dt: number) {\r\n    const players = getPlayers()\r\n\r\n    for (const p of players) {\r\n        p.retargetTimer -= dt\r\n        if (!p.target || p.target.HP <= 0 || p.retargetTimer <= 0) {\r\n            if (p.target) {\r\n                p.target.targetedBy--\r\n            }\r\n            p.target = findBestEnemy(p)\r\n            if (p.target) {\r\n                p.target.targetedBy++\r\n            }\r\n            p.retargetTimer = randRange(0.5, 1)\r\n        }\r\n\r\n        if (p.target) {\r\n            const dx = p.target.x - p.x\r\n            const dy = p.target.y - p.y\r\n            const distanceSq = dx * dx + dy * dy\r\n\r\n            const targetDistance = p.size / 2 + p.target.size / 2 + ATTACK_DISTANCE / 2\r\n\r\n            if (distanceSq < targetDistance * targetDistance) {\r\n                if (p.attackCooldown < getCurrentTime()) {\r\n                    p.target.HP -= p.attack * randRange(0.9, 1.1)\r\n                    p.attackCooldown = getCurrentTime() + p.attackSpeed * randRange(0.9, 1.1)\r\n\r\n                    applyImpulseToCenter(\r\n                        p.target,\r\n                        (dx / Math.sqrt(distanceSq)) * 5,\r\n                        (dy / Math.sqrt(distanceSq)) * 5,\r\n                        1\r\n                    )\r\n\r\n                    applyImpulseToCenter(\r\n                        p,\r\n                        (-dx / Math.sqrt(distanceSq)) * 5,\r\n                        (-dy / Math.sqrt(distanceSq)) * 5,\r\n                        1\r\n                    )\r\n\r\n                    // hit animation\r\n\r\n                    {\r\n                        const dx = p.target.x - p.x\r\n                        const dy = p.target.y - p.y\r\n                        const len = Math.hypot(dx, dy) || 1\r\n\r\n                        p.target.hitDirX = dx / len\r\n                        p.target.hitDirY = dy / len\r\n                        p.target.attackedTime = getCurrentTime()\r\n\r\n                        playOnceFromGroup(\"HIT\", { volume: randRange(0.1, 0.3) })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        applyMovementAI(p, dt)\r\n    }\r\n}\r\n","import { stepAI } from \"./ai\"\r\nimport { updateEncompassingViewport } from \"./camera\"\r\nimport { stepConfetti } from \"./confetti\"\r\nimport { getTeamWon, stepGameLogic } from \"./game-state\"\r\nimport { stepMessages } from \"./messages\"\r\nimport { stepPhysics } from \"./physics\"\r\nimport { renderScene } from \"./renderer\"\r\nimport { advanceTime, getTimescale } from \"./time\"\r\n\r\nlet lastTimestamp: number | undefined\r\nlet timeElapsed = 0\r\nfunction tick(time: number) {\r\n    const DT = 1 / 60\r\n\r\n    // physics\r\n\r\n    lastTimestamp ??= time\r\n\r\n    const delta = ((time - lastTimestamp) / 1000) * getTimescale()\r\n    timeElapsed += delta\r\n\r\n    timeElapsed %= 2\r\n\r\n    while (timeElapsed >= DT) {\r\n        if (!getTeamWon()) {\r\n            stepMessages()\r\n        }\r\n        stepGameLogic()\r\n        stepAI(DT)\r\n        stepPhysics(DT)\r\n        stepConfetti(DT)\r\n\r\n        advanceTime(DT)\r\n        timeElapsed -= DT\r\n    }\r\n\r\n    lastTimestamp = time - timeElapsed * 1000\r\n\r\n    renderScene()\r\n\r\n    updateEncompassingViewport()\r\n\r\n    requestAnimationFrame(tick)\r\n}\r\n\r\nexport function startGameLoop() {\r\n    requestAnimationFrame(tick)\r\n}\r\n","import { initAudio, playLoop, setLineOutputDevice } from \"./audio\"\r\nimport { startGameLoop } from \"./game-loop\"\r\nimport { generatePlayerGrid } from \"./game-state\"\r\nimport { updateSpawnVoteA_Needed, updateSpawnVoteB_Needed } from \"./messages\"\r\nimport { getQueryParam } from \"./utils\"\r\n\r\nawait initAudio()\r\n\r\nconst playAudio = getQueryParam(\"audio\") !== null\r\nif (!playAudio) {\r\n    await setLineOutputDevice()\r\n}\r\nplayLoop(\"BACKGROUND\", { volume: 0.3 })\r\n\r\ngeneratePlayerGrid()\r\n\r\nupdateSpawnVoteA_Needed()\r\nupdateSpawnVoteB_Needed()\r\n\r\nstartGameLoop()\r\n"],"names":["winStartTime"],"mappings":";;AAAA;AACA;AACA;AACA,SAAS,OAAO,CAAC,IAAY,EAAA;AACzB,IAAA,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,CAAA;AACtB,IAAA,OAAO,SAAS,MAAM,GAAA;AAClB,QAAA,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,GAAG,UAAU,MAAM,CAAC,CAAA;QACtD,OAAO,KAAK,GAAG,UAAU,CAAA;AAC7B,KAAC,CAAA;AACL,CAAC;AAED;AACA,MAAM,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAA;AAE/B;AACO,MAAM,SAAS,GAAG,CAAC,GAAW,EAAE,GAAW,KAAK,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,EAAE;;ACbjF,MAAM,cAAc,GAAG,CAAC,CAAA;AACxB,IAAI,eAAe,GAAG,CAAC,CAAA;AAEvB,MAAM,MAAM,GAAG;AACX,IAAA,KAAK,EAAE;QACH,4BAA4B;QAC5B,4BAA4B;QAC5B,4BAA4B;QAC5B,4BAA4B;AAC/B,KAAA;AACD,IAAA,GAAG,EAAE;QACD,0BAA0B;QAC1B,0BAA0B;QAC1B,0BAA0B;QAC1B,0BAA0B;QAC1B,0BAA0B;AAC7B,KAAA;AACD,IAAA,KAAK,EAAE;QACH,4BAA4B;QAC5B,4BAA4B;QAC5B,4BAA4B;QAC5B,4BAA4B;AAC/B,KAAA;IACD,GAAG,EAAE,CAAC,kEAAkE,CAAC;IACzE,IAAI,EAAE,CAAC,kCAAkC,CAAC;IAC1C,UAAU,EAAE,CAAC,2BAA2B,CAAC;IACzC,MAAM,EAAE,CAAC,YAAY,CAAC;IACtB,MAAM,EAAE,CAAC,YAAY,CAAC;CACzB,CAAA;AAUD;;AAE6B;AAE7B,IAAI,OAAO,GAAwB,IAAI,CAAA;AACvC,IAAI,WAAW,GAA2C,IAAI,CAAA;AAC9D,IAAI,YAAY,GAA4B,IAAI,CAAA;AAChD,IAAI,OAAO,GAAa,EAAE,CAAA;AAE1B;;AAE6B;SAEb,kBAAkB,GAAA;AAC9B,IAAA,OAAO,IAAI,OAAO,CAAC,OAAO,IAAG;QACzB,MAAM,OAAO,GAAG,MAAK;AACjB,YAAA,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,OAAO,CAAC,CAAA;AAClD,YAAA,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;AAC9C,YAAA,OAAO,EAAE,CAAA;AACb,SAAC,CAAA;AAED,QAAA,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,OAAO,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAA;AAC/D,QAAA,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAA;AAC/D,KAAC,CAAC,CAAA;AACN,CAAC;AAED;;AAE6B;AAE7B;AACO,eAAe,SAAS,GAAA;IAC3B,MAAM,kBAAkB,EAAE,CAAA;AAE1B,IAAA,OAAO,GAAG,IAAI,YAAY,EAAE,CAAA;AAC5B,IAAA,WAAW,GAAG,OAAO,CAAC,4BAA4B,EAAE,CAAA;AAEpD,IAAA,YAAY,GAAG,IAAI,KAAK,EAAE,CAAA;AAC1B,IAAA,YAAY,CAAC,SAAS,GAAG,WAAW,CAAC,MAAM,CAAA;AAC3C,IAAA,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAA;AAE5B,IAAA,MAAM,OAAO,CAAC,MAAM,EAAE,CAAA;AACtB,IAAA,MAAM,aAAa,CAAC,MAAM,CAAC,CAAA;AAC/B,CAAC;AAEM,eAAe,eAAe,CAAC,QAAgB,EAAA;IAClD,IAAI,CAAC,YAAY,EAAE;AACf,QAAA,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAA;AAC3C,KAAA;AAED,IAAA,IAAI,EAAE,WAAW,IAAI,YAAY,CAAC,EAAE;AAChC,QAAA,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAA;AAC7C,KAAA;;AAGD,IAAA,MAAM,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAA;AAC1C,CAAC;AAED;SACgB,iBAAiB,CAAC,KAA0B,EAAE,UAAwB,EAAE,EAAA;AACpF,IAAA,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,CAAA;IAC3B,IAAI,CAAC,IAAI,EAAE,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,WAAW;QAAE,OAAM;;AAGrD,IAAA,IAAI,KAAK,KAAK,KAAK,IAAI,eAAe,IAAI,cAAc;QAAE,OAAM;AAEhE,IAAA,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;IACtD,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC,CAAA;AAEjD,IAAA,IAAI,KAAK,KAAK,KAAK,IAAI,MAAM,EAAE;AAC3B,QAAA,eAAe,EAAE,CAAA;AAEjB,QAAA,MAAM,CAAC,OAAO,GAAG,MAAK;AAClB,YAAA,eAAe,EAAE,CAAA;AACrB,SAAC,CAAA;AACJ,KAAA;AACL,CAAC;AAED;SACgB,QAAQ,CAAC,KAA0B,EAAE,UAAwB,EAAE,EAAA;IAC3E,MAAM,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAA;AAClC,IAAA,IAAI,CAAC,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,WAAW;QAAE,OAAM;AAE/C,IAAA,UAAU,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,CAAA;AACrC,CAAC;AAED;;AAE6B;AAE7B,eAAe,aAAa,CAAC,MAAgC,EAAA;AACzD,IAAA,IAAI,CAAC,OAAO;AAAE,QAAA,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAA;IAE7D,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA;AAEtC,IAAA,MAAM,OAAO,CAAC,GAAG,CACb,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,KAAI;AAC9B,QAAA,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAC5B,IAAI,CAAC,GAAG,CAAC,OAAM,GAAG,KAAG;YACjB,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAgB,aAAA,EAAA,GAAG,CAAE,CAAA,CAAC,CAAA;AAC9C,YAAA,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,WAAW,EAAE,CAAA;AACpC,YAAA,OAAO,OAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;SACxC,CAAC,CACL,CAAA;KACJ,CAAC,CACL,CAAA;AACL,CAAC;AAED,SAAS,UAAU,CAAC,MAAmB,EAAE,IAAa,EAAE,OAAqB,EAAA;AACzE,IAAA,IAAI,CAAC,OAAO,IAAI,CAAC,WAAW;QAAE,OAAM;AAEpC,IAAA,MAAM,MAAM,GAAG,OAAO,CAAC,kBAAkB,EAAE,CAAA;AAC3C,IAAA,MAAM,IAAI,GAAG,OAAO,CAAC,UAAU,EAAE,CAAA;AAEjC,IAAA,MAAM,CAAC,MAAM,GAAG,MAAM,CAAA;AACtB,IAAA,MAAM,CAAC,IAAI,GAAG,IAAI,CAAA;;IAGlB,MAAM,CAAC,YAAY,CAAC,KAAK,GAAG,OAAO,CAAC,QAAQ,GAAG,CAAC,GAAG,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;;AAGxE,IAAA,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,MAAM,IAAI,GAAG,KAAK,OAAO,CAAC,QAAQ,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAA;AAEzF,IAAA,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;AACpB,IAAA,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAA;IACzB,MAAM,CAAC,KAAK,EAAE,CAAA;AAEd,IAAA,OAAO,MAAM,CAAA;AACjB,CAAC;AAEM,eAAe,qBAAqB,GAAA;IACvC,MAAM,OAAO,GAAG,MAAM,SAAS,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAA;AAE/D,IAAA,OAAO,OAAO;SACT,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,aAAa,CAAC;AACrC,SAAA,GAAG,CAAC,CAAC,KAAK;QACP,QAAQ,EAAE,CAAC,CAAC,QAAQ;AACpB,QAAA,KAAK,EAAE,CAAC,CAAC,KAAK,IAAI,uBAAuB;AAC5C,KAAA,CAAC,CAAC,CAAA;AACX,CAAC;AAEM,eAAe,mBAAmB,GAAA;AACrC,IAAA,MAAM,MAAM,GAAG,MAAM,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAA;AAEzE,IAAA,MAAM,OAAO,GAAG,MAAM,qBAAqB,EAAE,CAAA;AAC7C,IAAA,MAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,8BAA8B,CAAC,CAAA;AAC5E,IAAA,IAAI,MAAM,EAAE;AACR,QAAA,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;AACnC,KAAA;AAED,IAAA,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA;AAC7C;;AC/LO,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAA;AAEtD,MAAM,KAAK,GAAG,IAAI,CAAA;AAClB,MAAM,MAAM,GAAG,IAAI,CAAA;AAEnB,MAAM,CAAC,KAAK,GAAG,KAAK,CAAA;AACpB,MAAM,CAAC,MAAM,GAAG,MAAM,CAAA;AACtB,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,GAAG,gBAAgB,GAAG,IAAI,CAAA;AACpD,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,GAAG,gBAAgB,GAAG,IAAI,CAAA;AACtD,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAA;AAC/B,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,CAAA;AACvB,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,CAAA;AACzB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAA;AAE1B,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAE;;ACdrC,SAAU,WAAW,CAAC,CAAS,EAAA;AACjC,IAAA,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAA;AAChC,CAAC;AAEK,SAAU,YAAY,CAAC,CAAS,EAAA;AAClC,IAAA,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAA;AACjC,CAAC;SAEe,KAAK,CAAC,CAAS,EAAE,GAAW,EAAE,GAAW,EAAA;IACrD,OAAO,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAA;AAC5C,CAAC;AAEK,SAAU,aAAa,CAAC,IAAY,EAAA;IACtC,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAA;AAC1D,IAAA,OAAO,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AAC3B;;ACGA,MAAM,QAAQ,GAAe,EAAE,CAAA;SAEf,qBAAqB,GAAA;AACjC,IAAA,MAAM,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAA;;IAG5F,QAAQ,CAAC,IAAI,CAAC;AACV,QAAA,CAAC,EAAE,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;AAC5D,QAAA,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE;AACzB,QAAA,EAAE,EAAE,SAAS,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC;AACtB,QAAA,EAAE,EAAE,SAAS,CAAC,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;AAClC,QAAA,IAAI,EAAE,EAAE;AACR,QAAA,GAAG,EAAE,CAAC;AACN,QAAA,EAAE,EAAE,CAAC;AACL,QAAA,KAAK,EAAE,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC;AACpD,QAAA,IAAI,EAAE,CAAC;AACP,QAAA,GAAG,EAAE,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC;AACxB,QAAA,QAAQ,EAAE,KAAK;AAClB,KAAA,CAAC,CAAA;AACN,CAAC;AAEK,SAAU,YAAY,CAAC,EAAU,EAAA;;IAEnC,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG;AAAE,QAAA,qBAAqB,EAAE,CAAA;IAEvD,MAAM,OAAO,GAAG,IAAI,CAAA;IACpB,MAAM,IAAI,GAAG,KAAK,CAAA;AAElB,IAAA,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;AAC3C,QAAA,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA;AACrB,QAAA,CAAC,CAAC,IAAI,IAAI,EAAE,CAAA;;AAGZ,QAAA,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE;YACb,CAAC,CAAC,EAAE,IAAI,OAAO,GAAG,EAAE,GAAG,IAAI,CAAA;YAC3B,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,CAAA;YAChB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,CAAA;AAEhB,YAAA,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,EAAE;;AAEjB,gBAAA,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;gBAEjD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;oBAC5B,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;oBAC9D,MAAM,KAAK,GAAG,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;oBAEjC,QAAQ,CAAC,IAAI,CAAC;wBACV,CAAC,EAAE,CAAC,CAAC,CAAC;wBACN,CAAC,EAAE,CAAC,CAAC,CAAC;wBACN,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,KAAK;wBAC3B,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,KAAK;wBAC3B,IAAI,EAAE,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC;wBAC1B,GAAG,EAAE,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AAC9B,wBAAA,EAAE,EAAE,SAAS,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC;AACtB,wBAAA,KAAK,EAAE;4BACH,SAAS;4BACT,SAAS;4BACT,SAAS;4BACT,SAAS;4BACT,SAAS;4BACT,SAAS;4BACT,SAAS;AACZ,yBAAA,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAC5B,wBAAA,IAAI,EAAE,CAAC;AACP,wBAAA,GAAG,EAAE,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC;AACxB,wBAAA,QAAQ,EAAE,IAAI;AACjB,qBAAA,CAAC,CAAA;AACL,iBAAA;AAED,gBAAA,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;gBACrB,SAAQ;AACX,aAAA;AACJ,SAAA;AAAM,aAAA;;AAEH,YAAA,CAAC,CAAC,EAAE,IAAI,OAAO,GAAG,EAAE,CAAA;AACpB,YAAA,CAAC,CAAC,EAAE,IAAI,IAAI,CAAA;AACZ,YAAA,CAAC,CAAC,EAAE,IAAI,IAAI,CAAA;YAEZ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,CAAA;YAChB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,CAAA;YAChB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,CAAA;AAElB,YAAA,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,EAAE;AACjD,gBAAA,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;AACxB,aAAA;AACJ,SAAA;AACJ,KAAA;AACL,CAAC;SAEe,YAAY,GAAA;AACxB,IAAA,KAAK,MAAM,CAAC,IAAI,QAAQ,EAAE;QACtB,MAAM,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;QAE5D,GAAG,CAAC,IAAI,EAAE,CAAA;AACV,QAAA,GAAG,CAAC,WAAW,GAAG,IAAI,CAAA;QACtB,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;AACvB,QAAA,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA;AACjB,QAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC,KAAK,CAAA;;QAGvB,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,CAAA;QAEjE,GAAG,CAAC,OAAO,EAAE,CAAA;AAChB,KAAA;AACL;;ACxHA,IAAI,WAAW,GAAG,CAAC,CAAA;AACnB,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAA;SAEnC,cAAc,GAAA;AAC1B,IAAA,OAAO,WAAW,CAAA;AACtB,CAAC;AAEK,SAAU,WAAW,CAAC,EAAU,EAAA;IAClC,WAAW,IAAI,EAAE,CAAA;AACrB,CAAC;SAEe,YAAY,GAAA;AACxB,IAAA,OAAO,SAAS,CAAA;AACpB;;ACbA,IAAI,YAAY,GAAG,CAAC,CAAA;MAEP,MAAM,CAAA;AAKM,IAAA,IAAA,CAAA;AAAqB,IAAA,CAAA,CAAA;AAAkB,IAAA,CAAA,CAAA;AAAkB,IAAA,IAAA,CAAA;IAJ9E,EAAE,GAAG,YAAY,EAAE,CAAA;IAEnB,EAAE,GAAW,IAAI,CAAA;AAEjB,IAAA,WAAA,CAAqB,IAAY,EAAS,CAAS,EAAS,CAAS,EAAS,OAAO,CAAC,EAAA;QAAjE,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAQ;QAAS,IAAC,CAAA,CAAA,GAAD,CAAC,CAAQ;QAAS,IAAC,CAAA,CAAA,GAAD,CAAC,CAAQ;QAAS,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAI;;KAErF;IAED,EAAE,GAAG,CAAC,CAAA;IACN,EAAE,GAAG,CAAC,CAAA;IAEN,UAAU,GAAG,CAAC,CAAA;AAEd,IAAA,MAAM,CAAS;IACf,aAAa,GAAG,CAAC,CAAA;IAEjB,cAAc,GAAG,CAAC,CAAA;IAElB,WAAW,GAAG,CAAC,CAAA;IACf,MAAM,GAAG,EAAE,CAAA;;IAGX,YAAY,GAAG,CAAC,CAAA;IAChB,OAAO,GAAG,CAAC,CAAA;IACX,OAAO,GAAG,CAAC,CAAA;IAEX,SAAS,GAAG,cAAc,EAAE,CAAA;AAC5B,IAAA,SAAS,CAAS;AAElB,IAAA,IAAI,CAMD;AACN;;ACtCD,IAAI,WAAW,GAAG,EAAE,CAAA;AACpB,IAAI,cAAc,GAAG,CAAC,CAAA;AACtB,IAAI,aAAa,GAAG,CAAC,CAAA;AACrB,IAAI,aAAa,GAAG,CAAC,CAAA;SAEL,SAAS,GAAA;IACrB,OAAO;QACH,WAAW;QACX,cAAc;QACd,aAAa;QACb,aAAa;KAChB,CAAA;AACL,CAAC;AAED,IAAI,IAAI,GAAG,QAAQ,CAAA;AACnB,IAAI,IAAI,GAAG,QAAQ,CAAA;AACnB,IAAI,IAAI,GAAG,CAAC,QAAQ,CAAA;AACpB,IAAI,IAAI,GAAG,CAAC,QAAQ,CAAA;SAEJ,0BAA0B,GAAA;IACtC,IAAI,GAAG,QAAQ,CAAA;IACf,IAAI,GAAG,QAAQ,CAAA;IACf,IAAI,GAAG,CAAC,QAAQ,CAAA;IAChB,IAAI,GAAG,CAAC,QAAQ,CAAA;AAEhB,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;AAC5B,IAAA,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;AAC1B,QAAA,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAA;AACjD,QAAA,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAA;AACjD,QAAA,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAA;AACjD,QAAA,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAA;AACpD,KAAA;IAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;QAC1E,IAAI,GAAG,CAAC,CAAA;QACR,IAAI,GAAG,CAAC,CAAA;QACR,IAAI,GAAG,CAAC,CAAA;QACR,IAAI,GAAG,CAAC,CAAA;AACX,KAAA;;IAGD,aAAa,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,CAAA;IACjC,aAAa,GAAG,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,CAAA;AAEjC,IAAA,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,CAAA;AAC/C,IAAA,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,CAAA;IAChD,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,WAAW,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,YAAY,CAAC,CAAA;AAC5F,CAAC;SAEe,uBAAuB,GAAA;IACnC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAA;AACrC;;ACtDO,MAAM,MAAM,GAAG,CAAC,CAAA;AAChB,MAAM,MAAM,GAAG,CAAC;;ACShB,MAAM,YAAY,GAAG,CAAC,CAAA;AACtB,MAAM,YAAY,GAAG,CAAC,CAAA;AAE7B,MAAM,QAAQ,GAAa,EAAE,CAAA;AAE7B,IAAI,eAAe,GAAG,CAAC,CAAA;AACvB,IAAI,UAAU,GAAG,CAAC,CAAA;AAClB,IAAI,iBAAiB,GAAG,CAAC,CAAA;AACzB,IAAI,UAAU,GAAG,CAAC,CAAA;AAClB,IAAI,iBAAiB,GAAG,CAAC,CAAA;SAET,uBAAuB,GAAA;AACnC,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;IAE5B,MAAM,WAAW,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,MAAM,CAAA;AAC7E,IAAA,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,CAAC,CAAA;AAChE,CAAC;SAEe,uBAAuB,GAAA;AACnC,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;IAE5B,MAAM,WAAW,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,MAAM,CAAA;AAC7E,IAAA,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,CAAC,CAAA;AAChE,CAAC;SAEe,aAAa,GAAA;IACzB,OAAO;QACH,UAAU;QACV,iBAAiB;QACjB,UAAU;QACV,iBAAiB;KACpB,CAAA;AACL,CAAC;AAEK,SAAU,UAAU,CAAC,GAAW,EAAA;AAClC,IAAA,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AACtB,CAAC;AAED,MAAM,YAAY,GAAG,CAAC,CAAA;AAEtB,SAAS,oBAAoB,GAAA;AACzB,IAAA,IAAI,cAAc,EAAE,GAAG,eAAe,GAAG,YAAY,EAAE;QACnD,eAAe,GAAG,cAAc,EAAE,CAAA;;QAGlC,IAAI,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,EAAE;AACvB,YAAA,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;AAC9B,SAAA;AAAM,aAAA;AACH,YAAA,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;AAC9B,SAAA;AACJ,KAAA;AACL,CAAC;AAED,MAAM,cAAc,GAAG,aAAa,CAAC,KAAK,CAAC,KAAK,IAAI,CAAA;SAEpC,YAAY,GAAA;AACxB,IAAA,IAAI,cAAc,EAAE;AAChB,QAAA,oBAAoB,EAAE,CAAA;AACzB,KAAA;AAED,IAAA,uBAAuB,EAAE,CAAA;AACzB,IAAA,uBAAuB,EAAE,CAAA;AAEzB,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;AAC5B,IAAA,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,uBAAuB,EAAE,CAAA;IAE1D,IAAI,MAAM,GAAG,KAAK,CAAA;AAClB,IAAA,OAAO,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AACxB,QAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAA;AAC5B,QAAA,QAAQ,GAAG;YACP,KAAK,YAAY,EAAE;AACf,gBAAA,UAAU,EAAE,CAAA;AACZ,gBAAA,eAAe,EAAE,CAAA;gBAEjB,IAAI,UAAU,IAAI,iBAAiB,EAAE;oBACjC,UAAU,GAAG,CAAC,CAAA;oBAEd,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;oBAE9E,iBAAiB,CAAC,OAAO,CAAC,CAAA;AAC7B,iBAAA;gBAED,MAAM,GAAG,IAAI,CAAA;gBACb,MAAK;AACR,aAAA;YACD,KAAK,YAAY,EAAE;AACf,gBAAA,UAAU,EAAE,CAAA;AACZ,gBAAA,eAAe,EAAE,CAAA;gBAEjB,IAAI,UAAU,IAAI,iBAAiB,EAAE;oBACjC,UAAU,GAAG,CAAC,CAAA;AAEd,oBAAA,uBAAuB,EAAE,CAAA;oBAEzB,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;oBAC9E,iBAAiB,CAAC,OAAO,CAAC,CAAA;AAC7B,iBAAA;gBAED,MAAM,GAAG,IAAI,CAAA;gBACb,MAAK;AACR,aAAA;AACJ,SAAA;AACJ,KAAA;AAED,IAAA,IAAI,MAAM,EAAE;;AAEX,KAAA;AACL,CAAC;AAED,MAAM,MAAM,GAAG,0BAA0B,CAAA;AAEzC,IAAI,EAAE,GAAqB,IAAI,CAAA;AAC/B,IAAI,cAAc,GAAkB,IAAI,CAAA;AAExC,MAAM,kBAAkB,GAAG,IAAI,CAAA;AAE/B,SAAS,OAAO,GAAA;IACZ,IAAI,EAAE,IAAI,EAAE,CAAC,UAAU,KAAK,SAAS,CAAC,IAAI;QAAE,OAAM;AAElD,IAAA,EAAE,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,CAAA;AAE1B,IAAA,EAAE,CAAC,MAAM,GAAG,MAAK;AACb,QAAA,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAA;QAE3B,IAAI,cAAc,KAAK,IAAI,EAAE;YACzB,YAAY,CAAC,cAAc,CAAC,CAAA;YAC5B,cAAc,GAAG,IAAI,CAAA;AACxB,SAAA;AACL,KAAC,CAAA;AAED,IAAA,EAAE,CAAC,SAAS,GAAG,KAAK,IAAG;QACnB,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC,IAAI,CAAC,CAAA;QACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;QACnC,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,MAAM,GAAG,CAAC,CAAA;YACd,IAAI,MAAM,GAAG,CAAC,CAAA;AAEd,YAAA,KAAK,MAAM,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE;gBAC1B,IAAI,CAAC,KAAK,GAAG;AAAE,oBAAA,MAAM,EAAE,CAAA;qBAClB,IAAI,CAAC,KAAK,GAAG;AAAE,oBAAA,MAAM,EAAE,CAAA;AAC/B,aAAA;AAED,YAAA,MAAM,KAAK,GAAG,MAAM,GAAG,MAAM,CAAA;YAC7B,IAAI,KAAK,KAAK,CAAC,EAAE;gBACb,OAAM;AACT,aAAA;YAED,MAAM,CAAC,GAAG,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAA;YAEjC,IAAI,CAAC,GAAG,MAAM,EAAE;AACZ,gBAAA,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;AAC9B,aAAA;AAAM,iBAAA;AACH,gBAAA,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;AAC9B,aAAA;AACJ,SAAA;AACL,KAAC,CAAA;AAED,IAAA,EAAE,CAAC,OAAO,GAAG,GAAG,IAAG;AACf,QAAA,OAAO,CAAC,KAAK,CAAC,UAAU,EAAE,GAAG,CAAC,CAAA;QAC9B,EAAE,EAAE,KAAK,EAAE,CAAA;AACf,KAAC,CAAA;AAED,IAAA,EAAE,CAAC,OAAO,GAAG,MAAK;AACd,QAAA,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAA;AACzC,QAAA,iBAAiB,EAAE,CAAA;AACvB,KAAC,CAAA;AACL,CAAC;AAED;;AAEG;AACH,SAAS,iBAAiB,GAAA;IACtB,IAAI,cAAc,KAAK,IAAI;QAAE,OAAM;AAEnC,IAAA,cAAc,GAAG,MAAM,CAAC,UAAU,CAAC,MAAK;QACpC,cAAc,GAAG,IAAI,CAAA;AACrB,QAAA,OAAO,EAAE,CAAA;KACZ,EAAE,kBAAkB,CAAC,CAAA;AAC1B,CAAC;AAED,OAAO,EAAE;;ACrLT;AAEA,MAAM,kBAAkB,GAAG,IAAI,CAAA;AACxB,MAAM,cAAc,GAAG,CAAC,CAAA;AAC/B,MAAM,cAAc,GAAG,IAAI,CAAA;AAC3B,MAAM,aAAa,GAAG,GAAG,CAAA;AACzB,MAAM,aAAa,GAAG,IAAI,CAAA;AAE1B,IAAI,SAAS,GAAG,CAAC,CAAA;AACjB,IAAI,SAAS,GAAG,CAAC,CAAA;SAED,eAAe,GAAA;AAC3B,IAAA,SAAS,GAAG,cAAc,EAAE,GAAG,kBAAkB,CAAA;AACrD,CAAC;SAEe,eAAe,GAAA;AAC3B,IAAA,SAAS,GAAG,cAAc,EAAE,GAAG,kBAAkB,CAAA;AACrD,CAAC;AAED;AAEA,SAAS,WAAW,CAChB,CAAS,EACT,CAAS,EACT,KAAa,EACb,MAAc,EACd,KAAa,EACb,WAAmB,EACnB,KAAa,EACb,KAAa,EACb,KAAa,EAAA;AAEb,IAAA,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,GAAG,kBAAkB,CAAC,CAAC,CAAA;AAC9D,IAAA,MAAM,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAA;IAE9C,GAAG,CAAC,IAAI,EAAE,CAAA;AACV,IAAA,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,CAAA;AAC5C,IAAA,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;AACvB,IAAA,GAAG,CAAC,SAAS,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;;AAGtC,IAAA,GAAG,CAAC,SAAS,GAAG,CAAC,CAAA;AACjB,IAAA,GAAG,CAAC,WAAW,GAAG,KAAK,CAAA;IACvB,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAA;;IAGnC,MAAM,KAAK,GAAG,CAAC,KAAK,GAAG,WAAW,IAAI,KAAK,CAAA;AAC3C,IAAA,GAAG,CAAC,SAAS,GAAG,KAAK,CAAA;AACrB,IAAA,GAAG,CAAC,WAAW,GAAG,GAAG,CAAA;IACrB,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAA;AAEjC,IAAA,GAAG,CAAC,WAAW,GAAG,CAAC,CAAA;;AAGnB,IAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAA;AACvB,IAAA,GAAG,CAAC,IAAI,GAAG,mBAAmB,CAAA;AAC9B,IAAA,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAA;AACxB,IAAA,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAA;AAC3B,IAAA,GAAG,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAA,EAAA,EAAK,KAAK,CAAI,CAAA,EAAA,WAAW,GAAG,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAA;IAEzE,GAAG,CAAC,OAAO,EAAE,CAAA;AACjB,CAAC;AAED;AAEA,IAAIA,cAAY,GAAG,CAAC,CAAA;SAEJ,cAAc,GAAA;IAC1BA,cAAY,GAAG,cAAc,EAAE,CAAA;AACnC,CAAC;AAED,SAAS,WAAW,GAAA;AAChB,IAAA,OAAO,UAAU,EAAE,KAAK,MAAM,GAAG,GAAG,GAAG,GAAG,CAAA;AAC9C,CAAC;AAED,SAAS,aAAa,GAAA;;AAElB,IAAA,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,cAAc,EAAE,GAAGA,cAAY,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AAC9D,IAAA,MAAM,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAA;;IAGxB,GAAG,CAAC,cAAc,EAAE,CAAA;IACpB,GAAG,CAAC,IAAI,EAAE,CAAA;;AAGV,IAAA,GAAG,CAAC,WAAW,GAAG,IAAI,GAAG,CAAC,CAAA;AAC1B,IAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAA;AACvB,IAAA,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IAEvD,GAAG,CAAC,OAAO,EAAE,CAAA;;IAGb,GAAG,CAAC,IAAI,EAAE,CAAA;AACV,IAAA,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAA;AACxB,IAAA,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAA;AAC3B,IAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAA;AAEvB,IAAA,MAAM,GAAG,GAAG,CAAA,WAAA,EAAc,WAAW,EAAE,QAAQ,CAAA;AAC/C,IAAA,GAAG,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AAEhD,IAAA,GAAG,CAAC,IAAI,GAAG,oBAAoB,CAAA;IAC/B,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;AAC9D,IAAA,GAAG,CAAC,WAAW,GAAG,OAAO,CAAA;IAEzB,GAAG,CAAC,OAAO,EAAE,CAAA;;AAGb,IAAA,YAAY,EAAE,CAAA;AAClB,CAAC;SAEe,WAAW,GAAA;;IAEvB,GAAG,CAAC,cAAc,EAAE,CAAA;AACpB,IAAA,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;AACxD,IAAA,GAAG,CAAC,SAAS,GAAG,SAAS,CAAA;AACzB,IAAA,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;;AAIvD,IAAA,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,aAAa,EAAE,aAAa,EAAE,GAAG,SAAS,EAAE,CAAA;AAEjF,IAAA,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;AAC1D,IAAA,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,WAAW,CAAC,CAAA;AACnC,IAAA,GAAG,CAAC,MAAM,CAAC,cAAc,CAAC,CAAA;IAC1B,GAAG,CAAC,SAAS,CAAC,CAAC,aAAa,EAAE,CAAC,aAAa,CAAC,CAAA;AAE7C,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;AAE5B,IAAA,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;QAC1B,MAAM,IAAI,GAAG,cAAc,EAAE,GAAG,MAAM,CAAC,YAAY,CAAA;AACnD,QAAA,IAAI,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,aAAa,EAAE;AAClC,YAAA,MAAM,CAAC,GAAG,IAAI,GAAG,aAAa,CAAA;YAC9B,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAA;AAE3B,YAAA,MAAM,EAAE,GAAG,MAAM,CAAC,OAAO,CAAA;AACzB,YAAA,MAAM,EAAE,GAAG,MAAM,CAAC,OAAO,CAAA;;AAGzB,YAAA,MAAM,EAAE,GAAG,CAAC,EAAE,CAAA;YACd,MAAM,EAAE,GAAG,EAAE,CAAA;AAEb,YAAA,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAA;AAC5C,YAAA,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,GAAG,GAAG,CAAA;AAE/B,YAAA,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,CAAA;AACnB,YAAA,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,CAAA;AAEnB,YAAA,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,MAAM,CAAA;AAC3B,YAAA,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,MAAM,CAAA;YAC3B,MAAM,EAAE,GAAG,EAAE,CAAA;YACb,MAAM,EAAE,GAAG,EAAE,CAAA;AAEb,YAAA,MAAM,IAAI,GAAG,GAAG,CAAC,oBAAoB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;AACrD,YAAA,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAA,kBAAA,CAAoB,CAAC,CAAA;YAC1C,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,CAAmB,gBAAA,EAAA,KAAK,CAAG,CAAA,CAAA,CAAC,CAAA;AACnD,YAAA,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAA,kBAAA,CAAoB,CAAC,CAAA;AAE1C,YAAA,GAAG,CAAC,SAAS,GAAG,IAAI,CAAA;YACpB,GAAG,CAAC,SAAS,EAAE,CAAA;AAEf,YAAA,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,GAAG,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,KAAK,CAAC,CAAA;AAC5C,YAAA,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,GAAG,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,KAAK,CAAC,CAAA;YAC5C,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,GAAG,MAAM,GAAG,EAAE,GAAG,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,MAAM,GAAG,EAAE,GAAG,KAAK,CAAC,CAAA;YACxE,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,GAAG,MAAM,GAAG,EAAE,GAAG,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,MAAM,GAAG,EAAE,GAAG,KAAK,CAAC,CAAA;YAExE,GAAG,CAAC,SAAS,EAAE,CAAA;YACf,GAAG,CAAC,IAAI,EAAE,CAAA;AACb,SAAA;QAED,MAAM,MAAM,GAAG,cAAc,EAAE,GAAG,MAAM,CAAC,SAAS,CAAA;AAElD,QAAA,IAAI,MAAM,IAAI,CAAC,IAAI,MAAM,GAAG,cAAc,EAAE;AACxC,YAAA,MAAM,CAAC,GAAG,MAAM,GAAG,cAAc,CAAA;;AAGjC,YAAA,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,GAAG,aAAa,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;;AAG5C,YAAA,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AACxC,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,CAAA;AAEjD,YAAA,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,GAAG,GAAG,CAAA;AACpC,YAAA,MAAM,UAAU,GAAG,UAAU,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;YAErD,GAAG,CAAC,IAAI,EAAE,CAAA;AACV,YAAA,GAAG,CAAC,WAAW,GAAG,SAAS,CAAA;AAC3B,YAAA,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAA;YAExB,GAAG,CAAC,SAAS,EAAE,CAAA;YACf,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAA;YACvD,GAAG,CAAC,IAAI,EAAE,CAAA;YACV,GAAG,CAAC,OAAO,EAAE,CAAA;AAEb,YAAA,GAAG,CAAC,WAAW,GAAG,KAAK,CAAA;AAC1B,SAAA;AAED,QAAA,IAAI,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE;YAChB,IAAI,MAAM,CAAC,SAAS,KAAK,SAAS,IAAI,MAAM,CAAC,IAAI,EAAE;AAC/C,gBAAA,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,cAAc,EAAE,GAAG,MAAM,CAAC,SAAS,IAAI,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;gBAE7E,MAAM,IAAI,GAAG,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC,CAAA;AAChC,gBAAA,GAAG,CAAC,WAAW,GAAG,IAAI,CAAA;AAEtB,gBAAA,KAAK,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,EAAE;;AAEzB,oBAAA,MAAM,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,CAAA;AAEzB,oBAAA,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,CAAA;oBAChD,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,GAAG,CAAA;AAE1D,oBAAA,GAAG,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,MAAM,CAAA;oBAEvD,GAAG,CAAC,SAAS,EAAE,CAAA;AACf,oBAAA,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAA;oBACvE,GAAG,CAAC,IAAI,EAAE,CAAA;AACb,iBAAA;AAED,gBAAA,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAA;AACxB,gBAAA,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAA;AAC3B,gBAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAA;AACvB,gBAAA,GAAG,CAAC,IAAI,GAAG,oBAAoB,CAAA;gBAC/B,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAA;AACjC,gBAAA,GAAG,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,CAAA;AAC3B,gBAAA,GAAG,CAAC,WAAW,GAAG,IAAI,GAAG,IAAI,CAAA;gBAC7B,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,KAAK,MAAM,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AACtD,gBAAA,GAAG,CAAC,MAAM,CAAC,cAAc,CAAC,CAAA;AAC1B,gBAAA,GAAG,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AAEnC,gBAAA,GAAG,CAAC,WAAW,GAAG,CAAC,CAAA;AACtB,aAAA;AACJ,SAAA;AAAM,aAAA;YACH,GAAG,CAAC,SAAS,GAAG,IAAI,GAAG,MAAM,CAAC,EAAE,GAAG,KAAK,CAAA;YACxC,GAAG,CAAC,SAAS,EAAE,CAAA;AACf,YAAA,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAA;AAChF,YAAA,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,MAAM,CAAA;YACzD,GAAG,CAAC,MAAM,EAAE,CAAA;AAEZ,YAAA,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAA;AACxB,YAAA,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAA;AAC3B,YAAA,GAAG,CAAC,SAAS,GAAG,OAAO,CAAA;AACvB,YAAA,GAAG,CAAC,IAAI,GAAG,oBAAoB,CAAA;YAC/B,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAA;AACjC,YAAA,GAAG,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC,CAAA;YAC3B,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,KAAK,MAAM,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;AACtD,YAAA,GAAG,CAAC,MAAM,CAAC,cAAc,CAAC,CAAA;AAC1B,YAAA,GAAG,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AACtC,SAAA;AAED,QAAA,GAAG,CAAC,WAAW,GAAG,CAAC,CAAA;AACtB,KAAA;;AAID,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;IAC5B,IAAI,CAAC,OAAO,EAAE;QACV,GAAG,CAAC,cAAc,EAAE,CAAA;AAEpB,QAAA,MAAM,EAAE,UAAU,EAAE,iBAAiB,EAAE,UAAU,EAAE,iBAAiB,EAAE,GAAG,aAAa,EAAE,CAAA;QAExF,MAAM,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAA;QACxC,MAAM,UAAU,GAAG,EAAE,CAAA;AACrB,QAAA,MAAM,KAAK,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,SAAS,IAAI,CAAC,CAAA;AAEhD,QAAA,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,GAAG,cAAc,EAAE,CAAC,CAAA;AACrD,QAAA,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,GAAG,cAAc,EAAE,CAAC,CAAA;AAErD,QAAA,WAAW,CACP,KAAK,EACL,EAAE,EACF,SAAS,EACT,UAAU,EACV,UAAU,EACV,iBAAiB,EACjB,KAAK,EACL,mBAAmB,EACnB,SAAS,CACZ,CAAA;AAED,QAAA,WAAW,CACP,KAAK,EACL,GAAG,EACH,SAAS,EACT,UAAU,EACV,UAAU,EACV,iBAAiB,EACjB,MAAM,EACN,mBAAmB,EACnB,SAAS,CACZ,CAAA;AACJ,KAAA;AAAM,SAAA;AACH,QAAA,aAAa,EAAE,CAAA;AAClB,KAAA;AACL;;ACrSA,MAAM,OAAO,GAAa,EAAE,CAAA;AAC5B,IAAI,OAAO,GAAG,CAAC,CAAA;AACf,IAAI,YAAY,GAAG,CAAC,CAAA;SAEJ,UAAU,GAAA;AACtB,IAAA,OAAO,OAAO,CAAA;AAClB,CAAC;AAEK,SAAU,SAAS,CAAC,MAAc,EAAA;AACpC,IAAA,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;AACxB,CAAC;SAEe,UAAU,GAAA;AACtB,IAAA,OAAO,OAAO,CAAA;AAClB,CAAC;SAEe,kBAAkB,GAAA;IAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;QACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,SAAS,CACL,IAAI,MAAM,CAAC,MAAM,EAAE,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CACnF,CAAA;AACD,YAAA,SAAS,CACL,IAAI,MAAM,CACN,MAAM,EACN,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAC7B,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,CACrC,CACJ,CAAA;AACJ,SAAA;AACJ,KAAA;AACL,CAAC;SAEe,aAAa,GAAA;AACzB,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;IAE5B,IAAI,YAAY,GAAG,CAAC,CAAA;IACpB,IAAI,YAAY,GAAG,CAAC,CAAA;AAEpB,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,QAAA,MAAM,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAA;AACpB,QAAA,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE;YACX,IAAI,CAAC,CAAC,MAAM,EAAE;AACV,gBAAA,CAAC,CAAC,MAAM,CAAC,UAAU,EAAE,CAAA;AACrB,gBAAA,CAAC,CAAC,MAAM,GAAG,SAAS,CAAA;AACvB,aAAA;;AAGD,YAAA,IAAI,CAAC,CAAC,SAAS,KAAK,SAAS,EAAE;AAC3B,gBAAA,CAAC,CAAC,SAAS,GAAG,cAAc,EAAE,CAAA;gBAC9B,iBAAiB,CAAC,OAAO,CAAC,CAAA;;gBAI1B,MAAM,KAAK,GAAG,EAAE,CAAA;AAChB,gBAAA,CAAC,CAAC,IAAI,GAAG,EAAE,CAAA;gBAEX,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;oBAC5B,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;AAEhE,oBAAA,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;wBACR,KAAK;AACL,wBAAA,KAAK,EAAE,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC;AAC1B,wBAAA,IAAI,EAAE,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC;;AAG3B,wBAAA,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC;AACvC,wBAAA,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC;AAC1C,qBAAA,CAAC,CAAA;AACL,iBAAA;AACJ,aAAA;iBAAM,IAAI,CAAC,CAAC,SAAS,GAAG,cAAc,GAAG,cAAc,EAAE,EAAE;AACxD,gBAAA,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;AACpB,gBAAA,CAAC,EAAE,CAAA;gBACH,SAAQ;AACX,aAAA;AACJ,SAAA;AAAM,aAAA;AACH,YAAA,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE;AACnB,gBAAA,YAAY,EAAE,CAAA;AACjB,aAAA;AAAM,iBAAA;AACH,gBAAA,YAAY,EAAE,CAAA;AACjB,aAAA;AACJ,SAAA;AACJ,KAAA;AAED,IAAA,IAAI,OAAO,IAAI,CAAC,KAAK,YAAY,IAAI,CAAC,IAAI,YAAY,IAAI,CAAC,CAAC,EAAE;QAC1D,IAAI,YAAY,KAAK,CAAC,EAAE;YACpB,OAAO,GAAG,MAAM,CAAA;YAChB,iBAAiB,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAA;AAClD,SAAA;aAAM,IAAI,YAAY,IAAI,CAAC,EAAE;YAC1B,OAAO,GAAG,MAAM,CAAA;YAChB,iBAAiB,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAA;AAClD,SAAA;QACD,YAAY,GAAG,cAAc,EAAE,CAAA;QAC/B,iBAAiB,CAAC,KAAK,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAA;AAC5C,QAAA,cAAc,EAAE,CAAA;QAChB,qBAAqB,EAAE,CAAA;AAC1B,KAAA;IAED,IAAI,OAAO,KAAK,CAAC,IAAI,YAAY,GAAG,EAAE,GAAG,cAAc,EAAE,EAAE;QACvD,OAAO,GAAG,CAAC,CAAA;AACX,QAAA,OAAO,CAAC,MAAM,GAAG,CAAC,CAAA;AAClB,QAAA,kBAAkB,EAAE,CAAA;AACvB,KAAA;AACL;;AC3GA,MAAM,mBAAmB,GAAG,GAAG,CAAA;AAC/B,MAAM,iBAAiB,GAAG,EAAE,CAAA;AAC5B,MAAM,cAAc,GAAG,IAAI,CAAA;AAErB,SAAU,oBAAoB,CAAC,MAAc,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAA;AACnF,IAAA,MAAM,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAA;AACpB,IAAA,MAAM,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAA;AACxB,CAAC;AAED,MAAM,YAAY,GAAG,EAAE,CAAA;AACvB,MAAM,cAAc,GAAG,CAAC,CAAA;AACxB,MAAM,WAAW,GAAG,EAAE,CAAA;AAEtB,SAAS,oBAAoB,CAAC,CAAS,EAAE,EAAU,EAAA;IAC/C,MAAM,EAAE,aAAa,EAAE,aAAa,EAAE,GAAG,SAAS,EAAE,CAAA;AAEpD,IAAA,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,aAAa,CAAA;AAC9B,IAAA,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,aAAa,CAAA;IAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AAE/B,IAAA,MAAM,UAAU,GAAG,YAAY,GAAG,cAAc,CAAA;IAEhD,IAAI,IAAI,IAAI,UAAU;QAAE,OAAM;;IAG9B,MAAM,CAAC,GAAG,CAAC,IAAI,GAAG,UAAU,IAAI,cAAc,CAAA;AAC9C,IAAA,MAAM,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAA;AAEtB,IAAA,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAA;AACpB,IAAA,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAA;IAEpB,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,WAAW,GAAG,QAAQ,GAAG,EAAE,CAAA;IACxC,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,WAAW,GAAG,QAAQ,GAAG,EAAE,CAAA;AAC5C,CAAC;AAEK,SAAU,WAAW,CAAC,EAAU,EAAA;AAClC,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;;AAG5B,IAAA,KAAK,MAAM,CAAC,IAAI,OAAO,EAAE;AACrB,QAAA,oBAAoB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAA;QAE3B,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,CAAA;QAChB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,CAAA;;AAGhB,QAAA,CAAC,CAAC,EAAE,IAAI,cAAc,CAAA;AACtB,QAAA,CAAC,CAAC,EAAE,IAAI,cAAc,CAAA;AACzB,KAAA;;AAGD,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,QAAA,MAAM,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAA;AAEpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,YAAA,MAAM,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAA;YAEpB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;YACpB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;YACpB,MAAM,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAA;AAE/B,YAAA,MAAM,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAA;AACvB,YAAA,MAAM,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAA;AACvB,YAAA,MAAM,OAAO,GAAG,EAAE,GAAG,EAAE,CAAA;YAEvB,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,IAAI,OAAO,GAAG,OAAO;gBAAE,SAAQ;YAEvD,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;AAC7B,YAAA,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAA;AACpB,YAAA,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAA;AAEpB,YAAA,MAAM,WAAW,GAAG,OAAO,GAAG,IAAI,CAAA;;YAGlC,MAAM,GAAG,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAA;YACvB,MAAM,GAAG,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAA;YACvB,MAAM,MAAM,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAA;;YAGlC,MAAM,KAAK,GAAG,mBAAmB,GAAG,WAAW,GAAG,iBAAiB,GAAG,MAAM,CAAA;AAE5E,YAAA,MAAM,QAAQ,GAAG,KAAK,GAAG,EAAE,GAAG,EAAE,CAAA;AAChC,YAAA,MAAM,QAAQ,GAAG,KAAK,GAAG,EAAE,GAAG,EAAE,CAAA;AAEhC,YAAA,CAAC,CAAC,EAAE,IAAI,QAAQ,CAAA;AAChB,YAAA,CAAC,CAAC,EAAE,IAAI,QAAQ,CAAA;AAChB,YAAA,CAAC,CAAC,EAAE,IAAI,QAAQ,CAAA;AAChB,YAAA,CAAC,CAAC,EAAE,IAAI,QAAQ,CAAA;AACnB,SAAA;AACJ,KAAA;AACL;;ACvFA,SAAS,aAAa,CAAC,MAAc,EAAA;AACjC,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;AAE5B,IAAA,IAAI,IAAwB,CAAA;IAC5B,IAAI,SAAS,GAAG,QAAQ,CAAA;;IAGxB,MAAM,WAAW,GAAG,IAAI,CAAA;AACxB,IAAA,MAAM,aAAa,GAAG,GAAG,CAAA;;IAGzB,IAAI,OAAO,GAAG,CAAC,CAAA;AACf,IAAA,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AACzB,QAAA,IAAI,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,IAAI,IAAI,KAAK,CAAC,EAAE,IAAI,CAAC;YAAE,SAAQ;QACzD,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAA;QAC7B,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAA;AAC7B,QAAA,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAA;AAClD,KAAA;IACD,OAAO,KAAK,CAAC,CAAA;AAEb,IAAA,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AACzB,QAAA,IAAI,KAAK,CAAC,IAAI,KAAK,MAAM,CAAC,IAAI,IAAI,KAAK,CAAC,EAAE,IAAI,CAAC;YAAE,SAAQ;QAEzD,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAA;QAC7B,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAA;QAC7B,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AAE/B,QAAA,MAAM,QAAQ,GAAG,IAAI,GAAG,OAAO,CAAA;AAC/B,QAAA,MAAM,YAAY,GAAG,KAAK,CAAC,UAAU,CAAA;QAErC,MAAM,KAAK,GAAG,WAAW,GAAG,QAAQ,GAAG,aAAa,GAAG,YAAY,CAAA;QAEnE,IAAI,KAAK,GAAG,SAAS,EAAE;YACnB,SAAS,GAAG,KAAK,CAAA;YACjB,IAAI,GAAG,KAAK,CAAA;AACf,SAAA;AACJ,KAAA;AAED,IAAA,OAAO,IAAI,CAAA;AACf,CAAC;AAED,MAAM,SAAS,GAAG,CAAC,CAAA;AACnB,MAAM,EAAE,GAAG,EAAE,CAAA;AACb,MAAM,EAAE,GAAG,CAAC,CAAA;AAEZ,MAAM,eAAe,GAAG,GAAG,CAAA;AAE3B,SAAS,eAAe,CAAC,MAAc,EAAE,EAAU,EAAA;;IAE/C,MAAM,WAAW,GAAG,CAAC,CAAA;AAErB,IAAA,IAAI,SAAiB,CAAA;AACrB,IAAA,IAAI,SAAiB,CAAA;IAErB,IAAI,MAAM,CAAC,MAAM,EAAE;QACf,MAAM,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAA;QACrC,MAAM,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAA;AACrC,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAA;AAEzC,QAAA,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,eAAe,GAAG,CAAC,CAAA;QAErF,IAAI,IAAI,GAAG,cAAc;YAAE,OAAM;AAEjC,QAAA,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAA;AACpB,QAAA,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAA;AAEpB,QAAA,SAAS,GAAG,EAAE,GAAG,SAAS,GAAG,WAAW,CAAA;AACxC,QAAA,SAAS,GAAG,EAAE,GAAG,SAAS,GAAG,WAAW,CAAA;AAC3C,KAAA;AAAM,SAAA;AACH,QAAA,SAAS,GAAG,CAAC,GAAG,WAAW,CAAA;AAC3B,QAAA,SAAS,GAAG,CAAC,GAAG,WAAW,CAAA;AAC9B,KAAA;AAED,IAAA,MAAM,KAAK,GAAG,SAAS,GAAG,MAAM,CAAC,EAAE,CAAA;AACnC,IAAA,MAAM,KAAK,GAAG,SAAS,GAAG,MAAM,CAAC,EAAE,CAAA;IAEnC,oBAAoB,CAAC,MAAM,EAAE,EAAE,GAAG,KAAK,GAAG,EAAE,GAAG,MAAM,CAAC,EAAE,EAAE,EAAE,GAAG,KAAK,GAAG,EAAE,GAAG,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AAC9F,CAAC;AAEK,SAAU,MAAM,CAAC,EAAU,EAAA;AAC7B,IAAA,MAAM,OAAO,GAAG,UAAU,EAAE,CAAA;AAE5B,IAAA,KAAK,MAAM,CAAC,IAAI,OAAO,EAAE;AACrB,QAAA,CAAC,CAAC,aAAa,IAAI,EAAE,CAAA;AACrB,QAAA,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,aAAa,IAAI,CAAC,EAAE;YACvD,IAAI,CAAC,CAAC,MAAM,EAAE;AACV,gBAAA,CAAC,CAAC,MAAM,CAAC,UAAU,EAAE,CAAA;AACxB,aAAA;AACD,YAAA,CAAC,CAAC,MAAM,GAAG,aAAa,CAAC,CAAC,CAAC,CAAA;YAC3B,IAAI,CAAC,CAAC,MAAM,EAAE;AACV,gBAAA,CAAC,CAAC,MAAM,CAAC,UAAU,EAAE,CAAA;AACxB,aAAA;YACD,CAAC,CAAC,aAAa,GAAG,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;AACtC,SAAA;QAED,IAAI,CAAC,CAAC,MAAM,EAAE;YACV,MAAM,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;YAC3B,MAAM,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;YAC3B,MAAM,UAAU,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAA;AAEpC,YAAA,MAAM,cAAc,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,GAAG,eAAe,GAAG,CAAC,CAAA;AAE3E,YAAA,IAAI,UAAU,GAAG,cAAc,GAAG,cAAc,EAAE;AAC9C,gBAAA,IAAI,CAAC,CAAC,cAAc,GAAG,cAAc,EAAE,EAAE;AACrC,oBAAA,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;AAC7C,oBAAA,CAAC,CAAC,cAAc,GAAG,cAAc,EAAE,GAAG,CAAC,CAAC,WAAW,GAAG,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;AAEzE,oBAAA,oBAAoB,CAChB,CAAC,CAAC,MAAM,EACR,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAChC,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAChC,CAAC,CACJ,CAAA;AAED,oBAAA,oBAAoB,CAChB,CAAC,EACD,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EACjC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EACjC,CAAC,CACJ,CAAA;;AAID,oBAAA;wBACI,MAAM,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;wBAC3B,MAAM,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;AAC3B,wBAAA,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,CAAA;wBAEnC,CAAC,CAAC,MAAM,CAAC,OAAO,GAAG,EAAE,GAAG,GAAG,CAAA;wBAC3B,CAAC,CAAC,MAAM,CAAC,OAAO,GAAG,EAAE,GAAG,GAAG,CAAA;AAC3B,wBAAA,CAAC,CAAC,MAAM,CAAC,YAAY,GAAG,cAAc,EAAE,CAAA;AAExC,wBAAA,iBAAiB,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,SAAS,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,CAAA;AAC5D,qBAAA;AACJ,iBAAA;AACJ,aAAA;AACJ,SAAA;AAED,QAAA,eAAe,CAAC,CAAC,EAAE,EAAE,CAAC,CAAA;AACzB,KAAA;AACL;;AC1IA,IAAI,aAAiC,CAAA;AACrC,IAAI,WAAW,GAAG,CAAC,CAAA;AACnB,SAAS,IAAI,CAAC,IAAY,EAAA;AACtB,IAAA,MAAM,EAAE,GAAG,CAAC,GAAG,EAAE,CAAA;;IAIjB,aAAa,KAAK,IAAI,CAAA;AAEtB,IAAA,MAAM,KAAK,GAAG,CAAC,CAAC,IAAI,GAAG,aAAa,IAAI,IAAI,IAAI,YAAY,EAAE,CAAA;IAC9D,WAAW,IAAI,KAAK,CAAA;IAEpB,WAAW,IAAI,CAAC,CAAA;IAEhB,OAAO,WAAW,IAAI,EAAE,EAAE;QACtB,IAAI,CAAC,UAAU,EAAE,EAAE;AACf,YAAA,YAAY,EAAE,CAAA;AACjB,SAAA;AACD,QAAA,aAAa,EAAE,CAAA;QACf,MAAM,CAAC,EAAE,CAAC,CAAA;QACV,WAAW,CAAC,EAAE,CAAC,CAAA;QACf,YAAY,CAAC,EAAE,CAAC,CAAA;QAEhB,WAAW,CAAC,EAAE,CAAC,CAAA;QACf,WAAW,IAAI,EAAE,CAAA;AACpB,KAAA;AAED,IAAA,aAAa,GAAG,IAAI,GAAG,WAAW,GAAG,IAAI,CAAA;AAEzC,IAAA,WAAW,EAAE,CAAA;AAEb,IAAA,0BAA0B,EAAE,CAAA;IAE5B,qBAAqB,CAAC,IAAI,CAAC,CAAA;AAC/B,CAAC;SAEe,aAAa,GAAA;IACzB,qBAAqB,CAAC,IAAI,CAAC,CAAA;AAC/B;;ACzCA,MAAM,SAAS,EAAE,CAAA;AAEjB,MAAM,SAAS,GAAG,aAAa,CAAC,OAAO,CAAC,KAAK,IAAI,CAAA;AACjD,IAAI,CAAC,SAAS,EAAE;IACZ,MAAM,mBAAmB,EAAE,CAAA;AAC9B,CAAA;AACD,QAAQ,CAAC,YAAY,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAA;AAEvC,kBAAkB,EAAE,CAAA;AAEpB,uBAAuB,EAAE,CAAA;AACzB,uBAAuB,EAAE,CAAA;AAEzB,aAAa,EAAE"}